"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[292],{83292:(l,e,a)=>{a.r(e),a.d(e,{default:()=>oe});var n=a(59835),t=a(60499),u=a(86970),o=a(23459),s=a(91569),r=a(87270),i=a(31655);const d=(0,n._)("div",{class:"",style:{height:"50px"}},null,-1),_={key:0},w=(0,n._)("strong",null,"Разместил",-1),p=(0,n.Uk)("Верифицирован"),c=(0,n.Uk)("Не верифицирован"),m=(0,n.Uk)("В сети"),g=(0,n.Uk)("Не в сети"),f=(0,n._)("br",null,null,-1),b=(0,n._)("strong",null,"Дата размещения",-1),k=(0,n._)("br",null,null,-1),U=(0,n._)("strong",null,"Обьем",-1),v=(0,n._)("br",null,null,-1),y=(0,n._)("strong",null,"Курс",-1),h=(0,n._)("br",null,null,-1),W=(0,n._)("strong",null,"Минимальный объем",-1),z=(0,n._)("br",null,null,-1),$=(0,n._)("strong",null,"Тип оплаты",-1),q=(0,n.Uk)(":"),S=(0,n._)("br",null,null,-1),x=(0,n._)("br",null,null,-1),D=(0,n._)("strong",null,"Условия",-1),j=(0,n.Uk)(":"),C=(0,n._)("br",null,null,-1),Q=(0,n._)("br",null,null,-1),V=(0,n._)("br",null,null,-1),Z=(0,n._)("strong",null,"Разместил",-1),H=(0,n.Uk)("Верифицирован"),Y=(0,n.Uk)("Не верифицирован"),K=(0,n.Uk)("В сети"),P=(0,n.Uk)("Не в сети"),T=(0,n._)("br",null,null,-1),F=(0,n._)("strong",null,"Дата размещения",-1),L=(0,n._)("br",null,null,-1),B=(0,n._)("strong",null,"Обьем",-1),I=(0,n._)("br",null,null,-1),A=(0,n._)("strong",null,"Курс",-1),R=(0,n._)("br",null,null,-1),E=(0,n._)("strong",null,"Минимальный объем",-1),G=(0,n._)("br",null,null,-1),J=(0,n._)("strong",null,"Тип оплаты",-1),M=(0,n.Uk)(":"),N=(0,n._)("br",null,null,-1),O=(0,n._)("br",null,null,-1),X=(0,n._)("strong",null,"Условия",-1),ll=(0,n.Uk)(":"),el=(0,n._)("br",null,null,-1),al=(0,n._)("br",null,null,-1),nl=(0,n._)("br",null,null,-1),tl=(0,n._)("p",{class:"text-bold"},"Мои предложения",-1),ul=(0,n._)("strong",null,"В сделке",-1),ol=(0,n.Uk)(": "),sl=(0,n._)("br",null,null,-1),rl=(0,n._)("strong",null,"Дата размещения",-1),il=(0,n._)("br",null,null,-1),dl=(0,n._)("strong",null,"Обьем",-1),_l=(0,n._)("br",null,null,-1),wl=(0,n._)("strong",null,"Курс",-1),pl=(0,n._)("br",null,null,-1),cl=(0,n._)("strong",null,"Минимальный объем",-1),ml=(0,n._)("br",null,null,-1),gl=(0,n._)("strong",null,"Тип оплаты",-1),fl=(0,n.Uk)(":"),bl=(0,n._)("br",null,null,-1),kl=(0,n._)("br",null,null,-1),Ul=(0,n._)("strong",null,"Условия",-1),vl=(0,n.Uk)(":"),yl=(0,n._)("br",null,null,-1),hl=(0,n._)("br",null,null,-1),Wl=(0,n._)("br",null,null,-1),zl={class:"q-gutter-md"},$l=(0,n._)("p",{class:"text-bold"},"Мои сделки",-1),ql=(0,n._)("strong",null,"Дата создания сделки",-1),Sl=(0,n._)("br",null,null,-1),xl=(0,n._)("br",null,null,-1),Dl=(0,n._)("strong",null,"Объем в рублях",-1),jl=(0,n._)("br",null,null,-1),Cl=(0,n._)("br",null,null,-1),Ql=(0,n._)("p",{class:"text-bold"},"Активные сделки",-1),Vl=(0,n._)("strong",null,"Дата создания сделки",-1),Zl=(0,n._)("br",null,null,-1),Hl=(0,n._)("br",null,null,-1),Yl=(0,n._)("strong",null,"Объем в рублях",-1),Kl=(0,n._)("br",null,null,-1),Pl=(0,n._)("br",null,null,-1),Tl={key:1,class:"relative-position full-height"},Fl={__name:"Index",setup(l){let e=a(24409);const Fl=(0,o.Q)(),Ll=(0,i.T)(),Bl=(0,t.iH)("sell"),Il=(0,t.iH)("offers"),Al=(0,t.iH)(!1),Rl=(0,t.iH)({name:""});(0,n.YP)(Rl,(async l=>{await ee()}));const El=(0,n.Fl)((()=>e.orderBy(Fl.assets,["id"]))),Gl=(0,n.Fl)((()=>Ll.offers)),Jl=(0,n.Fl)((()=>Ll.own_offers)),Ml=(0,n.Fl)((()=>Ll.own_trades)),Nl=(0,n.Fl)((()=>Ll.all_trades)),Ol=(0,n.Fl)((()=>Ll.user));async function Xl(l){await ee(),l()}async function le(l){const e=await s.h.post("/api/p2p/delete_offer",{wallet:Ol.value.wallet,id:l});e.data.success?(0,r.d)("positive",e.data.message):(0,r.d)("negative",e.data.message),await Ll.get_own_offers()}async function ee(){await Ll.getAllData(Rl.value.id)}return(0,n.wF)((async()=>{Al.value=!Al,Rl.value=El.value[0],await ee(),Al.value=!Al})),(l,a)=>{const o=(0,n.up)("page-header"),s=(0,n.up)("q-tab"),r=(0,n.up)("q-tabs"),i=(0,n.up)("q-separator"),Fl=(0,n.up)("q-select"),Ll=(0,n.up)("q-btn"),ee=(0,n.up)("q-pull-to-refresh"),ae=(0,n.up)("q-inner-loading"),ne=(0,n.up)("q-badge"),te=(0,n.up)("q-card-section"),ue=(0,n.up)("q-card"),oe=(0,n.up)("q-expansion-item"),se=(0,n.up)("q-list"),re=(0,n.up)("q-scroll-area"),ie=(0,n.up)("q-tab-panel"),de=(0,n.up)("q-tab-panels"),_e=(0,n.up)("page-body"),we=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(we,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_e,{class:""},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{route_name:"wallet_index"}),d,(0,t.SU)(Ol).is_p2p_blocked?((0,n.wg)(),(0,n.iD)("div",Tl,[(0,n.Wm)(ae,{class:"z-max",showing:"",label:"Доступ на P2P вам временно закрыт",color:"negative","label-class":"text-negative","label-style":"font-size: 1.1em"})])):((0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(r,{modelValue:Il.value,"onUpdate:modelValue":a[0]||(a[0]=l=>Il.value=l),align:"justify","narrow-indicator":""},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{"no-caps":"",class:"bg-white text-primary",name:"offers",label:"P2P"}),(0,n.Wm)(s,{"no-caps":"",class:"bg-white text-primary",name:"own",label:"Мои предложения и сделки"}),(0,t.SU)(Ol).is_p2p_admin?((0,n.wg)(),(0,n.j4)(s,{key:0,"no-caps":"",class:"bg-white text-negative",name:"admin",label:"Раздел админа"})):(0,n.kq)("",!0)])),_:1},8,["modelValue"]),(0,n.Wm)(i),(0,n.Wm)(de,{modelValue:Il.value,"onUpdate:modelValue":a[6]||(a[6]=l=>Il.value=l),animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(ie,{name:"offers",class:"q-pa-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(ee,{onRefresh:Xl},{default:(0,n.w5)((()=>[(0,n.Wm)(Fl,{outlined:"",rounded:"",options:(0,t.SU)(El),modelValue:Rl.value,"onUpdate:modelValue":a[1]||(a[1]=l=>Rl.value=l),"option-label":"name",class:"q-mb-md",behavior:"menu",label:"Выберите актив"},null,8,["options","modelValue"]),(0,n.Wm)(Ll,{label:"Создать предложение на покупку",onClick:a[2]||(a[2]=e=>l.$router.push({name:"p2p_new_buy_offer"})),rounded:"",unelevated:"","no-caps":"",color:"positive",class:"full-width q-mb-md q-py-md"}),(0,n.Wm)(Ll,{label:"Создать предложение на продажу",onClick:a[3]||(a[3]=e=>l.$router.push({name:"p2p_new_sell_offer"})),rounded:"",unelevated:"","no-caps":"",color:"negative",class:"full-width q-py-md"}),(0,n.Wm)(i,{spaced:"lg"})])),_:1}),(0,n.Wm)(r,{modelValue:Bl.value,"onUpdate:modelValue":a[4]||(a[4]=l=>Bl.value=l),align:"justify"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{"no-caps":"",class:"bg-white text-negative",name:"sell",label:`Продажа (${(0,t.SU)(Gl).filter((l=>l.is_sell)).length})`},null,8,["label"]),(0,n.Wm)(s,{"no-caps":"",class:"bg-white text-positive",name:"buy",label:`Покупка (${(0,t.SU)(Gl).filter((l=>!l.is_sell)).length})`},null,8,["label"])])),_:1},8,["modelValue"]),(0,n.Wm)(i),(0,n.Wm)(de,{modelValue:Bl.value,"onUpdate:modelValue":a[5]||(a[5]=l=>Bl.value=l),animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(ie,{name:"buy",class:"no-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(re,{style:{height:"calc(100vh - 400px)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:"z-max",showing:Al.value,color:"primary"},null,8,["showing"]),(0,n.Wm)(se,{separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(e).orderBy((0,t.SU)(Gl).filter((l=>!l.is_sell)),["course"],["desc"]),(e=>((0,n.wg)(),(0,n.j4)(oe,{clickable:"",group:"buy",label:`№${e.id} Объем ${e.amount} из ${e.start_amount}`,key:e.id,caption:`Курс ${e.course}`},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n.Wm)(te,null,{default:(0,n.w5)((()=>[w,(0,n.Uk)(" "+(0,u.zw)(e.user.fio?e.user.fio:e.user.wallet)+" ",1),e.user.fio?((0,n.wg)(),(0,n.j4)(ne,{key:0,color:"positive"},{default:(0,n.w5)((()=>[p])),_:1})):((0,n.wg)(),(0,n.j4)(ne,{key:1,color:"negative"},{default:(0,n.w5)((()=>[c])),_:1})),e.user.is_online?((0,n.wg)(),(0,n.j4)(ne,{key:2,color:"positive"},{default:(0,n.w5)((()=>[m])),_:1})):((0,n.wg)(),(0,n.j4)(ne,{key:3,color:"negative"},{default:(0,n.w5)((()=>[g])),_:1})),f,b,(0,n.Uk)(": "+(0,u.zw)(new Date(e.created_at).toLocaleDateString()),1),k,U,(0,n.Uk)(": "+(0,u.zw)(e.amount)+" из "+(0,u.zw)(e.start_amount),1),v,y,(0,n.Uk)(": "+(0,u.zw)(e.course),1),h,W,(0,n.Uk)(": "+(0,u.zw)(e.min_amount),1),z,$,q,S,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.payment_types,(l=>((0,n.wg)(),(0,n.iD)("span",{key:l.id},(0,u.zw)(l.label)+"  ",1)))),128)),x,D,j,C,(0,n.Uk)(" "+(0,u.zw)(e.rules),1),Q,V,(0,n.Wm)(Ll,{color:"negative",disable:e.user.wallet===(0,t.SU)(Ol).wallet,onClick:a=>l.$router.push({name:"p2p_offer",params:{offer_id:e.id}}),rounded:"","no-caps":"",unelevated:"",class:"full-width",label:"Продать"},null,8,["disable","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","caption"])))),128))])),_:1})])),_:1})])),_:1}),(0,n.Wm)(ie,{name:"sell",class:"no-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(re,{style:{height:"calc(100vh - 400px)"}},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:"z-max",showing:Al.value,color:"primary"},null,8,["showing"]),(0,n.Wm)(se,{separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(e).orderBy((0,t.SU)(Gl).filter((l=>l.is_sell)),["course"],["asc"]),(e=>((0,n.wg)(),(0,n.j4)(oe,{clickable:"",group:"sell",key:e.id,label:`№${e.id} Объем ${e.amount} из ${e.start_amount}`,caption:`Курс ${e.course}`},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n.Wm)(te,null,{default:(0,n.w5)((()=>[Z,(0,n.Uk)(" "+(0,u.zw)(e.user.fio?e.user.fio:e.user.wallet)+" ",1),e.user.fio?((0,n.wg)(),(0,n.j4)(ne,{key:0,color:"positive"},{default:(0,n.w5)((()=>[H])),_:1})):((0,n.wg)(),(0,n.j4)(ne,{key:1,color:"negative"},{default:(0,n.w5)((()=>[Y])),_:1})),e.user.is_online?((0,n.wg)(),(0,n.j4)(ne,{key:2,color:"positive"},{default:(0,n.w5)((()=>[K])),_:1})):((0,n.wg)(),(0,n.j4)(ne,{key:3,color:"negative"},{default:(0,n.w5)((()=>[P])),_:1})),T,F,(0,n.Uk)(": "+(0,u.zw)(new Date(e.created_at).toLocaleDateString()),1),L,B,(0,n.Uk)(": "+(0,u.zw)(e.amount)+" из "+(0,u.zw)(e.start_amount),1),I,A,(0,n.Uk)(": "+(0,u.zw)(e.course)+" руб",1),R,E,(0,n.Uk)(": "+(0,u.zw)(e.min_amount),1),G,J,M,N,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.payment_types,(l=>((0,n.wg)(),(0,n.iD)("span",{key:l.id},(0,u.zw)(l.label)+"  ",1)))),128)),O,X,ll,el,(0,n.Uk)(" "+(0,u.zw)(e.rules),1),al,nl,(0,n.Wm)(Ll,{color:"positive",disable:e.user.wallet===(0,t.SU)(Ol).wallet,onClick:a=>l.$router.push({name:"p2p_offer",params:{offer_id:e.id}}),rounded:"","no-caps":"",unelevated:"",class:"full-width",label:"Купить"},null,8,["disable","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","caption"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(ie,{name:"own",class:"q-pa-md"},{default:(0,n.w5)((()=>[tl,(0,t.SU)(Jl).length>0?((0,n.wg)(),(0,n.j4)(se,{key:0,separator:"",class:"q-mb-md"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(Jl),(l=>((0,n.wg)(),(0,n.j4)(oe,{clickable:"",group:"offers",label:`#${l.id} - На ${l.is_sell?"продажу":"покупку"} ${l.amount} ${l.asset.name}`,key:l.id,caption:`Курс ${l.course}`},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n.Wm)(te,null,{default:(0,n.w5)((()=>[ul,ol,(0,n._)("span",{class:(0,u.C_)(["text-bold",l.is_in_trade?"text-negative":"text-positive"])},(0,u.zw)(l.is_in_trade?"ДА":"НЕТ"),3),sl,rl,(0,n.Uk)(": "+(0,u.zw)(new Date(l.created_at).toLocaleDateString()),1),il,dl,(0,n.Uk)(": "+(0,u.zw)(l.amount),1),_l,wl,(0,n.Uk)(": "+(0,u.zw)(l.course)+" руб",1),pl,cl,(0,n.Uk)(": "+(0,u.zw)(l.min_amount),1),ml,gl,fl,bl,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.payment_types,(l=>((0,n.wg)(),(0,n.iD)("span",{key:l.id},(0,u.zw)(l.label)+"  ",1)))),128)),kl,Ul,vl,yl,(0,n.Uk)(" "+(0,u.zw)(l.rules),1),hl,Wl,(0,n._)("div",zl,[(0,n.Wm)(Ll,{color:"warning",disable:"",rounded:"","no-caps":"",unelevated:"",label:"Редактировать"}),(0,n.Wm)(Ll,{color:"negative",onClick:e=>le(l.id),rounded:"","no-caps":"",unelevated:"",label:"Удалить"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","caption"])))),128))])),_:1})):(0,n.kq)("",!0),$l,(0,t.SU)(Ml).length>0?((0,n.wg)(),(0,n.j4)(se,{key:1,separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(Ml),(e=>((0,n.wg)(),(0,n.j4)(oe,{clickable:"",group:"offers",label:`# ${e.id} - ${e.offer.is_sell?e.opponent.wallet===(0,t.SU)(Ol).wallet?"Покупка":"Продажа":e.opponent.wallet===(0,t.SU)(Ol).wallet?"Продажа":"Покупка"}\n                                ${e.asset_amount} ${e.offer.asset.name} по офферу #${e.offer.id}`,"header-class":`${e.offer.is_sell?e.opponent.wallet===(0,t.SU)(Ol).wallet?"text-positive":"text-negative":e.opponent.wallet===(0,t.SU)(Ol).wallet?"text-negative":"text-positive"}\n                                ${e.asset_amount} ${e.offer.asset.name}`,key:e.id,caption:`Сумма сделки в рублях ${e.fiat_amount} | Статус сделки: ${e.status.label}`},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n.Wm)(te,null,{default:(0,n.w5)((()=>[ql,(0,n.Uk)(": "+(0,u.zw)(new Date(e.created_at).toLocaleDateString()),1),Sl,(0,n._)("strong",null,"Обьем в "+(0,u.zw)(e.offer.asset.name),1),(0,n.Uk)(": "+(0,u.zw)(e.asset_amount)+" ",1),xl,Dl,(0,n.Uk)(": "+(0,u.zw)(e.fiat_amount),1),jl,Cl,(0,n.Wm)(Ll,{dense:"",class:"full-width q-py-md",color:"primary","no-caps":"",unelevated:"",onClick:a=>l.$router.push({name:"p2p_trade",params:{uid:e.UID}}),rounded:"",label:"В сделку"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","header-class","caption"])))),128))])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(ie,{name:"admin",class:"q-pa-md"},{default:(0,n.w5)((()=>[Ql,(0,t.SU)(Nl).length>0?((0,n.wg)(),(0,n.j4)(se,{key:0,separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,t.SU)(Nl).filter((l=>l.in_progress)),(e=>((0,n.wg)(),(0,n.j4)(oe,{clickable:"",group:"offers",label:`№${e.id} Cтатус: ${e.status.label}`,"header-class":`text-${e.status.color}`,key:e.id},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,null,{default:(0,n.w5)((()=>[(0,n.Wm)(te,null,{default:(0,n.w5)((()=>[Vl,(0,n.Uk)(": "+(0,u.zw)(new Date(e.created_at).toLocaleDateString()),1),Zl,(0,n._)("strong",null,"Обьем в "+(0,u.zw)(e.offer.asset.name),1),(0,n.Uk)(": "+(0,u.zw)(e.asset_amount)+" ",1),Hl,Yl,(0,n.Uk)(": "+(0,u.zw)(e.fiat_amount),1),Kl,Pl,(0,n.Wm)(Ll,{dense:"",class:"full-width q-py-md",color:"primary","no-caps":"",unelevated:"",onClick:a=>l.$router.push({name:"p2p_trade",params:{uid:e.UID}}),rounded:"",label:"В сделку"},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label","header-class"])))),128))])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1},8,["modelValue"])]))])),_:1})])),_:1})}}};var Ll=a(47817),Bl=a(70900),Il=a(50926),Al=a(89800),Rl=a(84106),El=a(90699),Gl=a(18401),Jl=a(24455),Ml=a(66663),Nl=a(60854),Ol=a(13246),Xl=a(61123),le=a(44458),ee=a(63190),ae=a(20990),ne=a(69984),te=a.n(ne);const ue=Fl,oe=ue;te()(Fl,"components",{QTabs:Ll.Z,QTab:Bl.Z,QSeparator:Il.Z,QTabPanels:Al.Z,QTabPanel:Rl.Z,QPullToRefresh:El.Z,QSelect:Gl.Z,QBtn:Jl.Z,QScrollArea:Ml.Z,QInnerLoading:Nl.Z,QList:Ol.Z,QExpansionItem:Xl.Z,QCard:le.Z,QCardSection:ee.Z,QBadge:ae.Z})}}]);