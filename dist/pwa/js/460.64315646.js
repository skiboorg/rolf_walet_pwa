"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[460],{29460:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var t=l(59835),s=l(86970),n=l(60499),u=l(39981),d=l.n(u),i=l(87270),o=l(14895),c=l(43463),r=(l(76028),l(18910)),m=l(46190),w=l(23459),p=l(98030),g=l(17779);const v=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),f=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),_=(0,t.Uk)("Ваш баланс"),k=(0,t.Uk)("Ваш внутриигровой баланс"),W=(0,t.Uk)("Кол-во отправляемого актива*"),b=(0,t.Uk)(" Подтверждение отправки актива "),h=(0,t.Uk)("Актив"),y=(0,t.Uk)("ChikenBro"),x=(0,t.Uk)("Количество"),q=(0,t.Uk)("Комиссия транзакции"),C={key:0},U={__name:"ChickenGameCBT",setup(e){const a="https://astraz.ru",u=(0,c.s)(),{EraChain:U}=((0,r.tv)(),l(99407)),Q=(0,m.c)(),Z=(0,w.Q)();let H=(0,n.iH)(!1);const B=(0,n.iH)(!1),j=(0,n.iH)(0),M=(0,r.yj)();let S=(0,n.iH)(null);(0,t.bv)((async()=>{S.value=M.params.asset_key}));const V=(0,t.Fl)((()=>Q.balances)),N=(0,t.Fl)((()=>Q.addresses[Q.currentAddressIdx].address));function T(){u.togglePinCodeModalVisible()}(0,t.wF)((async()=>{const e=await d().get(a+`/api/user/get_user?wallet=${N.value}`);g.log(e.data.wallet),j.value=e.data.balance}));const z=(0,n.iH)({amount:"",address:"7NBHJjDugvtNq9GsMMcwcbx7yNMAn47fLH",title:"Пополнение баланса игры",message:"Пополнение баланса игры",encrypted:!1,fee:0,raw:0});function A(){z.value={amount:"",address:"7NBHJjDugvtNq9GsMMcwcbx7yNMAn47fLH",title:"Пополнение баланса игры",message:"Пополнение баланса игры",encrypted:!1,fee:0,raw:0}}async function P(){B.value=!B.value;const e=!0,a=await Z.getKeyPair(),l=new U.Type.KeyPair(a),t={assetKey:"1048580",amount:z.value.amount};g.log(l),g.log(t);const s=await p.era.tranRawSendAsset(l,t,z.value.address,z.value.title,z.value.message,z.value.encrypted,e);g.log(s),s.error?(0,i.d)("negative",s.error.message):(z.value.fee=s.fee,z.value.raw=s.raw),B.value=!B.value}async function D(){B.value=!B.value;const e=await d().get(a+"/api/data/settings");if(e.data.is_can_change_balance){const e=await p.era.broadcast64(z.value.raw);if(g.log(e),e.error)(0,i.d)("negative",e.message),B.value=!B.value;else{(0,i.d)("info","Транзакция создана"),H.value=!1;const l=await d().post(a+"/api/user/add_to_balance",{wallet:N.value,signature:e.signature}),t=await d().get(a+`/api/user/get_user?wallet=${N.value}`);j.value=t.data.balance,l.data.success&&(0,i.d)("positive","Баланс пополнен")}}else(0,i.d)("negative","Сервер занят. Повторите попытку через пару минут");B.value=!B.value}return(e,a)=>{const l=(0,t.up)("q-btn"),u=(0,t.up)("unconfirmed-tx-icon"),d=(0,t.up)("q-header"),i=(0,t.up)("q-item-section"),c=(0,t.up)("q-item"),r=(0,t.up)("q-input"),m=(0,t.up)("q-separator"),w=(0,t.up)("btn"),p=(0,t.up)("q-list"),g=(0,t.up)("q-card-section"),U=(0,t.up)("page-body"),Q=(0,t.up)("q-card-actions"),Z=(0,t.up)("q-card"),M=(0,t.up)("q-dialog"),S=(0,t.up)("page"),N=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(S,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{reveal:"",class:"text-white q-py-sm items-center flex justify-between"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{"no-caps":"",label:"Отправка актива ChikenBro",onClick:a[0]||(a[0]=a=>e.$router.back()),icon:"las la-angle-left",unelevated:""}),(0,t.Wm)(u)])),_:1}),v,f,(0,t.Wm)(g,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{side:"",class:"text-weight-bold text-dark"},{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)((0,n.SU)(V)[1048580][0][1])+" CBT",1)])),_:1})])),_:1}),(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{side:"",class:"text-weight-bold text-dark"},{default:(0,t.w5)((()=>[k])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(j.value)+" CBT",1)])),_:1})])),_:1}),(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"text-weight-medium text-dark"},{default:(0,t.w5)((()=>[W])),_:1})])),_:1}),(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{rounded:"",dense:"",outlined:"",type:"number",modelValue:z.value.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value.amount=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.Wm)(m,{class:"q-my-md"}),(0,t.Wm)(w,{label:"Отправить",onClick:T,disabled:!z.value.amount||!z.value.address,outline:!1},null,8,["disabled"])])),_:1})])),_:1})])),_:1}),(0,t.Wm)(M,{modelValue:(0,n.SU)(H),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.dq)(H)?H.value=e:H=e),persistent:"","transition-show":"scale","transition-hide":"scale",onBeforeHide:A},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{class:"bg-white text-dark",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"text-weight-bold"},{default:(0,t.w5)((()=>[b])),_:1}),(0,t.Wm)(g,{class:"q-py-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{dense:"",separator:"",class:"q-mb-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{side:"",class:"text-weight-medium text-dark"},{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[y])),_:1})])),_:1}),(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{side:"",class:"text-weight-medium text-dark"},{default:(0,t.w5)((()=>[x])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(z.value.amount)+" ChikenBro",1)])),_:1})])),_:1}),(0,t.Wm)(c,{class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{side:"",class:"text-weight-medium text-dark"},{default:(0,t.w5)((()=>[q])),_:1}),(0,t.Wm)(i,{class:"text-caption"},{default:(0,t.w5)((()=>[z.value.fee>0?((0,t.wg)(),(0,t.iD)("span",C,"газ "+(0,s.zw)(z.value.fee)+" OLF",1)):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(Q,{class:"bg-white text-teal"},{default:(0,t.w5)((()=>[0===z.value.fee?((0,t.wg)(),(0,t.j4)(l,{key:0,label:"Расчет комиссии",rounded:"",loading:B.value,class:"q-mb-sm full-width",unelevated:"","no-caps":"",color:"info",onClick:P,outline:!1},null,8,["loading"])):((0,t.wg)(),(0,t.j4)(l,{key:1,label:"Подтвердить",rounded:"",loading:B.value,class:"q-mb-sm full-width",unelevated:"","no-caps":"",color:"positive",onClick:D,outline:!1},null,8,["loading"])),(0,t.wy)((0,t.Wm)(l,{label:"Отменить",rounded:"","no-caps":"",color:"negative",class:"full-width",unelevated:"",outline:"",loading:B.value},null,8,["loading"]),[[N]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)((0,n.SU)(o.Z),{onPincode_ок:a[3]||(a[3]=e=>(0,n.dq)(H)?H.value=!0:H=!0)})])),_:1})}}};var Q=l(16602),Z=l(24455),H=l(63190),B=l(13246),j=l(490),M=l(76749),S=l(13119),V=l(50926),N=l(32074),T=l(44458),z=l(11821),A=l(62146),P=l(69984),D=l.n(P);const F=U,I=F;D()(U,"components",{QHeader:Q.Z,QBtn:Z.Z,QCardSection:H.Z,QList:B.Z,QItem:j.Z,QItemSection:M.Z,QInput:S.Z,QSeparator:V.Z,QDialog:N.Z,QCard:T.Z,QCardActions:z.Z}),D()(U,"directives",{ClosePopup:A.Z})}}]);