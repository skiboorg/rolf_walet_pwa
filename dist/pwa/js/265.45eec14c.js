"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[265],{95265:(e,l,a)=>{a.r(l),a.d(l,{default:()=>j});var n=a(59835),u=a(60499),t=a(86970),s=a(46190),o=a(23459),d=a(98030),m=a(39981),i=a.n(m),p=a(87270),c=a(99407),r=a(17779);const v=(0,n._)("div",{class:"",style:{height:"60px"}},null,-1),U={class:"q-mb-lg"},b={key:0},w={key:0},S=(0,n._)("p",{class:"q-mb-sm text-negative"},"Внимание! ФИО верифицированного пользователя должно совпадать с ФИО владельца карты.",-1),q=(0,n._)("p",{class:"q-mb-sm"},"Срок вывода зависит от банка и может занимать до 5 рабочих дней",-1),y=(0,n._)("p",{class:"q-mb-sm text-caption"},"Номер карты*",-1),g=(0,n._)("p",{class:"q-mb-sm text-caption"},"Название банка*",-1),k=(0,n._)("p",{class:"q-mb-sm text-caption"},"ФИО получателя (владельца карты)*",-1),_={class:"q-mb-sm text-caption"},V=(0,n.Uk)("Сумма вывода в рублях* (Ваш баланс "),f=(0,n.Uk)(" RUB)"),h=(0,n._)("p",{class:"q-mb-sm text-caption"},"Минимальная сумма вывода 5000 RUB",-1),W={key:1},x={class:"q-mb-sm text-caption"},A=(0,n._)("p",{class:"q-mb-sm text-caption"},"ФИО получателя*",-1),H={class:"q-mb-sm text-caption"},C=(0,n.Uk)("Сумма вывода (Ваш баланс "),$={key:1},F={class:"text-center"},z=(0,n.Uk)("Вывод средств доступен только "),D=(0,n.Uk)("верифицированным"),N=(0,n.Uk)(" пользователям."),Q={__name:"Withdraw",setup(e){const l=(0,s.c)(),a=(0,o.Q)();let m=(0,u.iH)([]);const Q=(0,n.Fl)((()=>a.assets)),Z=(0,u.iH)({amount:"",address:"7PsEDvVphCpXwk7NrZyAyHNR7d6Fp57Xcy",title:"Вывод",message:"Вывод",encrypted:!1,fee:0,raw:0});let E=(0,u.iH)(null),P=(0,u.iH)(null),R=(0,u.iH)(null),B=(0,u.iH)(!1),K=((0,u.iH)(null),(0,u.iH)(null)),T=(0,u.iH)(null);async function j(){B.value=!B.value,await I()}const X=(0,n.Fl)((()=>l.balances)),G=(0,n.Fl)((()=>l.verifyPersonData));async function I(){B.value=!B.value;const e=!0,l=await a.getKeyPair(),n=new c.EraChain.Type.KeyPair(l),u={assetKey:K.value.key,amount:Z.value.amount};r.log(n),r.log(u);const t=await d.era.tranRawSendAsset(n,u,Z.value.address,Z.value.title,Z.value.message,Z.value.encrypted,e);r.log(t),t.error?(0,p.d)("negative",t.error.message):(Z.value.fee=t.fee,Z.value.raw=t.raw,await M()),B.value=!B.value}async function M(){const e=await d.era.broadcast64(Z.value.raw);r.log(e),e.error?((0,p.d)("negative",e.message),B.value=!B.value):((0,p.d)("info","Транзакция создана"),await i().get(`https://api.telegram.org/bot603507616:AAEmmGeaujFe_lqkw31HHSoh2EiAvVNtFA4/sendMessage?chat_id=-542426502\n  &text=ФИО введенное : ${E.value}%0A\n  ФИО в блокчейне ${G.value.name}%0A\n  Номер карты: ${R.value}%0A\n  Банк: ${P.value}%0A\n  Адрес сети ${K.value.name} : ${T.value}%0A\n  Сумма в ${K.value.name}: ${Z.value.amount}%0A\n`),E.value=null,R.value=null,P.value=null,Z.value.amount=null,(0,p.d)("positive","Запрос успешно отправлен"),B.value=!B.value)}return(0,n.wF)((()=>{m.value=Q.value.filter((e=>e.can_withdrawal))})),(e,l)=>{const a=(0,n.up)("page-header"),s=(0,n.up)("q-select"),o=(0,n.up)("q-input"),d=(0,n.up)("q-btn"),i=(0,n.up)("router-link"),p=(0,n.up)("q-scroll-area"),c=(0,n.up)("page-body"),r=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"q-px-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(a),v,(0,n._)("div",U,[(0,n.Wm)(p,{style:{height:"85vh"}},{default:(0,n.w5)((()=>[(0,u.SU)(G)?((0,n.wg)(),(0,n.iD)("div",b,[(0,n.Wm)(s,{modelValue:(0,u.SU)(K),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,u.dq)(K)?K.value=e:K=e),outlined:"",rounded:"",dense:"","options-dense":"",options:(0,u.SU)(m),"option-label":"name",label:"Выберите актив*",class:"q-mb-md"},null,8,["modelValue","options"]),(0,u.SU)(K)&&1643===(0,u.SU)(K).key?((0,n.wg)(),(0,n.iD)("div",w,[S,q,y,(0,n.Wm)(o,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,u.SU)(R),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,u.dq)(R)?R.value=e:R=e),mask:"#### #### #### ####","fill-mask":"_"},null,8,["modelValue"]),g,(0,n.Wm)(o,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,u.SU)(P),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,u.dq)(P)?P.value=e:P=e)},null,8,["modelValue"]),k,(0,n.Wm)(o,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,u.SU)(E),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,u.dq)(E)?E.value=e:E=e)},null,8,["modelValue"]),(0,n._)("p",_,[V,(0,n._)("span",null,(0,t.zw)((0,u.SU)(X)[1643]?(0,u.SU)(X)[1643][0][1]:"0"),1),f]),h,(0,n.Wm)(o,{class:"q-mb-md",rounded:"",dense:"",outlined:"",modelValue:Z.value.amount,"onUpdate:modelValue":l[5]||(l[5]=e=>Z.value.amount=e),type:"number"},(0,n.Nv)({_:2},[(0,u.SU)(X)[1643]?{name:"append",fn:(0,n.w5)((()=>[(0,n.Wm)(d,{onClick:l[4]||(l[4]=e=>Z.value.amount=(0,u.SU)(X)[1643][0][1]),size:"10px",flat:"",rounded:"",label:"Вывести все"})]))}:void 0]),1032,["modelValue"]),(0,n.Wm)(d,{color:"primary",rounded:"",loading:(0,u.SU)(B),onClick:j,disable:!Z.value.amount||Z.value.amount<5||!(0,u.SU)(E)||!(0,u.SU)(R)||!(0,u.SU)(P),unelevated:"","no-caps":"",class:"full-width q-py-md",label:"Отправить"},null,8,["loading","disable"])])):(0,n.kq)("",!0),(0,u.SU)(K)&&1643!==(0,u.SU)(K).key?((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("p",x,"Адрес в сети "+(0,t.zw)((0,u.SU)(K).name)+"*",1),(0,n.Wm)(o,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,u.SU)(T),"onUpdate:modelValue":l[6]||(l[6]=e=>(0,u.dq)(T)?T.value=e:T=e)},null,8,["modelValue"]),A,(0,n.Wm)(o,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,u.SU)(E),"onUpdate:modelValue":l[7]||(l[7]=e=>(0,u.dq)(E)?E.value=e:E=e)},null,8,["modelValue"]),(0,n._)("p",H,[C,(0,n._)("span",null,(0,t.zw)((0,u.SU)(X)[(0,u.SU)(K).key]?(0,u.SU)(X)[(0,u.SU)(K).key][0][1]:"0"),1),(0,n.Uk)(" "+(0,t.zw)((0,u.SU)(K).name)+")",1)]),(0,n.Wm)(o,{class:"q-mb-md",rounded:"",dense:"",outlined:"",modelValue:Z.value.amount,"onUpdate:modelValue":l[9]||(l[9]=e=>Z.value.amount=e),type:"number"},(0,n.Nv)({_:2},[(0,u.SU)(X)[(0,u.SU)(K).key]?{name:"append",fn:(0,n.w5)((()=>[(0,n.Wm)(d,{onClick:l[8]||(l[8]=e=>Z.value.amount=(0,u.SU)(X)[(0,u.SU)(K).key][0][1]),size:"10px",flat:"",rounded:"",label:"Вывести все"})]))}:void 0]),1032,["modelValue"]),(0,n.Wm)(d,{color:"primary",rounded:"",loading:(0,u.SU)(B),onClick:j,disable:!Z.value.amount||!(0,u.SU)(E)||!(0,u.SU)(T),unelevated:"","no-caps":"",class:"full-width q-py-md",label:"Отправить"},null,8,["loading","disable"])])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",$,[(0,n._)("p",F,[z,(0,n.Wm)(i,{style:{color:"inherit"},to:"/wallet/create_person"},{default:(0,n.w5)((()=>[D])),_:1}),N])]))])),_:1})])])),_:1})])),_:1})}}};var Z=a(66663),E=a(18401),P=a(13119),R=a(24455),B=a(69984),K=a.n(B);const T=Q,j=T;K()(Q,"components",{QScrollArea:Z.Z,QSelect:E.Z,QInput:P.Z,QBtn:R.Z})}}]);