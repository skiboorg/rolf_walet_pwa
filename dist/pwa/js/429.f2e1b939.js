"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[429],{89429:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Ta});l(46727),l(40702),l(18964);var t=l(59835),n=l(60499),u=l(86970),o=l(61957),s=l(76028),i=l(23459),r=l(98030),d=l(91569),c=l(46190),m=l(43463),p=l(6827),v=(l(39981),l(18910)),w=l(17779);const g={class:"flex items-center"},_=["src"],f={class:"no-margin text-weight-medium"},y=(0,t._)("p",{class:"q-mb-none q-px-sm text-weight-medium"},"/",-1),U=["src"],b={class:"no-margin text-weight-medium"},x=(0,t._)("div",{class:"",style:{height:"60px"}},null,-1),h={class:"row q-col-gutter-sm"},k={class:"col-4"},S={key:0,class:"no-margin text-bold text-h6"},W={key:1,class:"no-margin text-bold text-h6 text-positive"},q={class:"col-8"},z={class:"row q-col-gutter-xs text-caption"},H={class:"col-5"},V=(0,t._)("span",{class:"text-grey-7"},"Макс за 24ч",-1),Q=(0,t._)("br",null,null,-1),Z=(0,t._)("br",null,null,-1),F=(0,t._)("span",{class:"text-grey-7"},"Мин за 24ч",-1),C=(0,t._)("br",null,null,-1),j={class:"col-6"},P={class:"text-grey-7 ellipsis"},A=(0,t._)("br",null,null,-1),K=(0,t._)("br",null,null,-1),D={class:"text-grey-7 ellipsis"},T=(0,t._)("br",null,null,-1),Y=(0,t._)("br",null,null,-1),O={class:"flex items-center no-wrap q-mb-md"},I=(0,t._)("br",null,null,-1),L=(0,t._)("br",null,null,-1),B={class:"text-caption q-mb-sm"},N=(0,t._)("p",{class:"text-caption q-mb-sm"},"Цена за единицу",-1),$=(0,t._)("p",{class:"text-caption q-mb-sm"},"Итого",-1),M={class:""},E={class:"row q-col-gutter-sm"},R={class:"col-6"},G={class:"orders-grid"},J=(0,t._)("div",{class:"flex items-center justify-between"},[(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Цена"),(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Объем")],-1),X={class:"no-margin price-red-color text-10 text-weight-medium"},ee={class:"no-margin vol-color text-10 text-weight-medium"},ae={class:"col-6"},le={class:"orders-grid"},te=(0,t._)("div",{class:"flex items-center justify-between"},[(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Цена"),(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Объем")],-1),ne={class:"no-margin price-green-color text-10 text-weight-medium"},ue={class:"no-margin vol-color text-10 text-weight-medium"},oe={class:"col-6"},se={class:"flex items-center justify-between"},ie=(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Всего",-1),re={class:"no-margin text-10 vol-color text-weight-medium"},de={class:"col-6"},ce={class:"flex items-center justify-between"},me=(0,t._)("p",{class:"no-margin text-10 text-grey-8 text-weight-medium"},"Всего",-1),pe={class:"no-margin text-10 vol-color text-weight-medium"},ve=(0,t.Uk)(" Подтверждение транзакции создании ордера "),we=(0,t.Uk)("Имею"),ge=(0,t.Uk)("Хочу"),_e=(0,t.Uk)("Комиссия"),fe={__name:"Trade",props:{tradePair:Object},setup(e){const a=e,l=(0,m.s)(),o=(0,i.Q)(),fe=(0,c.c)(),ye=((0,v.tv)(),(0,t.Fl)((()=>o.assets)),(0,t.Fl)((()=>fe.balances)));let Ue=(0,n.iH)([]),be=(0,n.iH)({}),xe=(0,n.iH)({}),he=(0,n.iH)("buy"),ke=(0,n.iH)(null),Se=(0,n.iH)(null),We=(0,n.iH)(null),qe=(0,n.iH)(!1),ze=(0,n.iH)(!1),He=(0,n.iH)({}),Ve=(0,n.iH)(0),Qe=(0,n.iH)(0),Ze=(0,n.iH)(0),Fe=(0,n.iH)({});const Ce={11:"Недостаточно средств на балансе",66:"Минимальная стоимость ордера 250руб"};function je(){w.log(ke.value),ke.value||(We.value=null,Se.value=null),Se.value&&(We.value=ke.value*Se.value)}function Pe(){Ze.value=0,Qe.value=0,he.value="buy",ke.value=null,Se.value=null,We.value=null}function Ae(){w.log(be.value),w.log(xe.value),w.log(Ve.value),Ve.value>0&&"sell"===he.value&&(w.log(be.value.course/xe.value.course),Se.value>be.value.course/xe.value.course?w.log("more"):Se.value=be.value.course/xe.value.course),ke.value&&(We.value=ke.value*Se.value)}function Ke(){w.log(We.value),Se.value&&(ke.value=We.value/Se.value)}async function De(){const e=await o.getKeyPair(),a="buy"===he.value?xe.value.key:be.value.key,l="buy"===he.value?We.value:ke.value,t="buy"===he.value?be.value.key:xe.value.key,n="buy"===he.value?ke.value:We.value;w.log("have",a),w.log("want",t),w.log("haveAmount",l),w.log("wantAmount",n),await r.era.tranRawOrder(e,"name",a,l,t,n,!0).then((e=>{He.value=e,w.log(He.value),qe.value=!0}))}async function Te(){ze.value=!ze.value;const e=await r.era.broadcast64(He.value.raw);w.log(e),e.error?p.Z.create({color:"negative",message:Ce[e.error]}):p.Z.create({color:"info",message:"Транзакция отправлена в сеть"}),qe.value=!1,ze.value=!ze.value}function Ye(e){ke.value=e.pairAmount,Se.value=e.pairPrice,We.value=e.pairAmount*e.pairPrice,he.value="sell"}function Oe(e){ke.value=e.pairAmount,Se.value=e.pairPrice,We.value=e.pairAmount*e.pairPrice,he.value="buy"}async function Ie(){l.toggleLoadingState(),be.value=o.assets.find((e=>e.key===a.tradePair["0"])),xe.value=o.assets.find((e=>e.key===a.tradePair["1"])),Ue.value=await(0,s.AU)(a.tradePair["0"],a.tradePair["1"]),l.toggleLoadingState(),Ve.value=be.value.min_trade_price;for(let a of Ue.value.have)Qe.value+=parseFloat(a.leftHave);for(let a of Ue.value.want)Ze.value+=parseFloat(a.leftWant);const e=await d.h.get(`/api/settings/volume?q_key=${xe.value.key}&b_key=${be.value.key}`);w.log(e.data),Fe.value=e.data,w.log(Fe.value)}return(0,t.YP)(he,(e=>{ke.value=null,Se.value=null,We.value=null})),(e,a)=>{const o=(0,t.up)("q-btn"),s=(0,t.up)("q-avatar"),i=(0,t.up)("q-header"),r=(0,t.up)("q-separator"),d=(0,t.up)("q-input"),c=(0,t.up)("q-linear-progress"),m=(0,t.up)("q-card-section"),p=(0,t.up)("q-card"),v=(0,t.up)("q-dialog"),w=(0,t.up)("q-item-section"),fe=(0,t.up)("q-item"),Ve=(0,t.up)("q-list"),Ce=(0,t.up)("q-card-actions"),Le=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(v,{modelValue:(0,n.SU)(l).tradeModalVisible,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,n.SU)(l).tradeModalVisible=e),persistent:"",maximized:"","transition-show":"slide-left","transition-hide":"slide-right",onBeforeShow:Ie,onBeforeHide:Pe},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{class:"bg-white"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{style:{"padding-right":"16px"},reveal:"",class:"text-white q-py-sm items-center flex justify-between"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(o,{label:"Назад","no-caps":"",icon:"las la-angle-left",unelevated:""},null,512),[[Le]]),(0,t._)("div",g,[(0,t.Wm)(s,{size:"30px",class:"q-mr-sm"},{default:(0,t.w5)((()=>[(0,t._)("img",{src:(0,n.SU)(be).icon,alt:""},null,8,_)])),_:1}),(0,t._)("p",f,(0,u.zw)((0,n.SU)(be).name),1),y,(0,t.Wm)(s,{size:"30px",class:"q-mr-sm"},{default:(0,t.w5)((()=>[(0,t._)("img",{src:(0,n.SU)(xe).icon,alt:""},null,8,U)])),_:1}),(0,t._)("p",b,(0,u.zw)((0,n.SU)(xe).name),1)])])),_:1}),x,(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("div",k,["OLF"!==(0,n.SU)(be).name?((0,t.wg)(),(0,t.iD)("p",S,(0,u.zw)(parseFloat((0,n.SU)(Fe).last_price).toFixed(4)),1)):((0,t.wg)(),(0,t.iD)("p",W,(0,u.zw)((0,n.SU)(be).course),1))]),(0,t._)("div",q,[(0,t._)("div",z,[(0,t._)("div",H,[V,Q,(0,t.Uk)(" "+(0,u.zw)(parseFloat((0,n.SU)(Fe).highest_price_24h).toFixed(2)),1),Z,F,C,(0,t.Uk)(" "+(0,u.zw)(parseFloat((0,n.SU)(Fe).lowest_price_24h).toFixed(2)),1)]),(0,t._)("div",j,[(0,t._)("span",P,"Объем за 24ч ("+(0,u.zw)((0,n.SU)(be).name)+")",1),A,(0,t.Uk)(" ~"+(0,u.zw)(parseFloat((0,n.SU)(Fe).base_volume_24).toFixed(2)),1),K,(0,t._)("span",D,"Объем за 24ч ("+(0,u.zw)((0,n.SU)(xe).name)+")",1),T,(0,t.Uk)(" ~"+(0,u.zw)(parseFloat((0,n.SU)(Fe).quote_volume_24).toFixed(2)),1),Y])])])]),(0,t.Wm)(r,{spaced:"md"}),(0,t._)("div",O,[(0,t.Wm)(o,{unelevated:"","no-caps":"",class:"bye-btn full-width q-py-sm",color:"buy"===(0,n.SU)(he)?"positive":"grey-5",onClick:a[0]||(a[0]=e=>(0,n.dq)(he)?he.value="buy":he="buy")},{default:(0,t.w5)((()=>[(0,t.Uk)(" Купить "+(0,u.zw)((0,n.SU)(be).name)+" за",1),I,(0,t.Uk)(" "+(0,u.zw)((0,n.SU)(xe).name),1)])),_:1},8,["color"]),(0,t.Wm)(o,{color:"sell"===(0,n.SU)(he)?"negative":"grey-5",unelevated:"",class:"sell-btn full-width q-py-sm","no-caps":"",onClick:a[1]||(a[1]=e=>(0,n.dq)(he)?he.value="sell":he="sell")},{default:(0,t.w5)((()=>[(0,t.Uk)(" Продать "+(0,u.zw)((0,n.SU)(be).name)+" за",1),L,(0,t.Uk)(" "+(0,u.zw)((0,n.SU)(xe).name),1)])),_:1},8,["color"])]),(0,t._)("p",B,(0,u.zw)("buy"===(0,n.SU)(he)?"Кол-во к покупке":"Кол-во к продаже"),1),(0,t.Wm)(d,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,n.SU)(ke),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.dq)(ke)?ke.value=e:ke=e),onKeyup:je,type:"number"},{append:(0,t.w5)((()=>["sell"===(0,n.SU)(he)?((0,t.wg)(),(0,t.j4)(o,{key:0,onClick:a[2]||(a[2]=e=>(0,n.dq)(ke)?ke.value=(0,n.SU)(ye)[(0,n.SU)(be).key][0][1]:ke=(0,n.SU)(ye)[(0,n.SU)(be).key][0][1]),size:"10px",flat:"",rounded:"",label:"Продать все"})):(0,t.kq)("",!0)])),_:1},8,["modelValue"]),N,(0,t.Wm)(d,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,n.SU)(Se),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.dq)(Se)?Se.value=e:Se=e),onBlur:Ae,type:"number"},null,8,["modelValue"]),$,(0,t.Wm)(d,{class:"q-mb-md",rounded:"",dense:"",outlined:"",modelValue:(0,n.SU)(We),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,n.dq)(We)?We.value=e:We=e),onKeyup:Ke,type:"number"},null,8,["modelValue"]),(0,t.Wm)(o,{rounded:"",loading:(0,n.SU)(ze),label:"buy"===(0,n.SU)(he)?"Купить":"Продать",color:"buy"===(0,n.SU)(he)?"positive":"negative",class:"full-width q-mb-md",unelevated:"",size:"18px","no-caps":"",disable:!(0,n.SU)(ke)||!(0,n.SU)(Se)||!(0,n.SU)(We),onClick:De},null,8,["loading","label","color","disable"]),(0,t._)("div",M,[(0,t._)("div",E,[(0,t._)("div",R,[(0,t._)("div",G,[J,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,n.SU)(Ue).have,((e,a)=>((0,t.wg)(),(0,t.j4)(c,{reverse:"",onClick:a=>Oe(e),class:"flex items-center justify-between relative-position sell-pr",color:"red-2",value:e.leftHave/e.amountHave,size:"16px"},{default:(0,t.w5)((()=>[(0,t._)("p",X,(0,u.zw)(e.pairPrice),1),(0,t._)("p",ee,(0,u.zw)(e.leftHave),1)])),_:2},1032,["onClick","value"])))),256))])]),(0,t._)("div",ae,[(0,t._)("div",le,[te,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,n.SU)(Ue).want,((e,a)=>((0,t.wg)(),(0,t.j4)(c,{onClick:a=>Ye(e),class:"flex items-center justify-between relative-position bg-white buy-pr",color:"light-green-11",value:e.leftWant/e.amountWant,size:"16px"},{default:(0,t.w5)((()=>[(0,t._)("p",ne,(0,u.zw)(e.pairPrice),1),(0,t._)("p",ue,(0,u.zw)(e.leftWant),1)])),_:2},1032,["onClick","value"])))),256))])]),(0,t._)("div",oe,[(0,t.Wm)(r),(0,t._)("div",se,[ie,(0,t._)("p",re,(0,u.zw)((0,n.SU)(Qe)),1)])]),(0,t._)("div",de,[(0,t.Wm)(r),(0,t._)("div",ce,[me,(0,t._)("p",pe,(0,u.zw)((0,n.SU)(Ze)),1)])])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(v,{modelValue:(0,n.SU)(qe),"onUpdate:modelValue":a[7]||(a[7]=e=>(0,n.dq)(qe)?qe.value=e:qe=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[ve])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Ve,{separator:"",dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(fe,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[we])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)("buy"===(0,n.SU)(he)?(0,n.SU)(We):(0,n.SU)(ke))+" "+(0,u.zw)("buy"===(0,n.SU)(he)?(0,n.SU)(xe).name:(0,n.SU)(be).name),1)])),_:1})])),_:1}),(0,t.Wm)(fe,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[ge])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)("buy"===(0,n.SU)(he)?(0,n.SU)(ke):(0,n.SU)(We))+" "+(0,u.zw)("buy"===(0,n.SU)(he)?(0,n.SU)(be).name:(0,n.SU)(xe).name),1)])),_:1})])),_:1}),(0,t.Wm)(fe,null,{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[_e])),_:1}),(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)((0,n.SU)(He).fee),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(Ce,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(o,{rounded:"","no-caps":"",unelevated:"",color:"grey-6",loading:(0,n.SU)(ze),label:"Отмена"},null,8,["loading"]),[[Le]]),(0,t.Wm)(o,{rounded:"","no-caps":"",unelevated:"",loading:(0,n.SU)(ze),onClick:Te,label:"buy"===(0,n.SU)(he)?"Купить":"Продать",color:"buy"===(0,n.SU)(he)?"positive":"negative"},null,8,["loading","label","color"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var ye=l(32074),Ue=l(44458),be=l(16602),xe=l(24455),he=l(61357),ke=l(63190),Se=l(50926),We=l(13119),qe=l(8289),ze=l(13246),He=l(490),Ve=l(76749),Qe=l(11821),Ze=l(62146),Fe=l(69984),Ce=l.n(Fe);const je=fe,Pe=je;Ce()(fe,"components",{QDialog:ye.Z,QCard:Ue.Z,QHeader:be.Z,QBtn:xe.Z,QAvatar:he.Z,QCardSection:ke.Z,QSeparator:Se.Z,QInput:We.Z,QLinearProgress:qe.Z,QList:ze.Z,QItem:He.Z,QItemSection:Ve.Z,QCardActions:Qe.Z}),Ce()(fe,"directives",{ClosePopup:Ze.Z});var Ae=l(17779);const Ke=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),De={class:"flex items-center justify-start"},Te=["src"],Ye=["src"],Oe={class:"q-pa-md"},Ie={key:0},Le=(0,t._)("span",{class:"text-weight-medium text-grey-9"},"за 24ч",-1),Be=(0,t.Uk)(" : "),Ne=(0,t._)("br",null,null,-1),$e=(0,t._)("span",{class:"text-weight-medium text-grey-9"},"за 7д",-1),Me=(0,t.Uk)(" : "),Ee=(0,t._)("br",null,null,-1),Re=(0,t._)("span",{class:"text-weight-medium text-grey-9"},"за 1м",-1),Ge=(0,t.Uk)(" : "),Je={class:"no-margin text-caption text-weight-bold"},Xe={class:"no-margin text-caption"},ea={class:"no-margin text-caption"},aa={class:"no-margin text-caption"},la={class:"no-margin text-caption"},ta={class:"no-margin text-caption"},na=(0,t.Uk)("Блок "),ua=["href"],oa={class:"no-margin text-caption text-weight-bold"},sa={class:"no-margin text-caption"},ia={class:"no-margin text-caption"},ra={class:"no-margin text-caption"},da={class:"no-margin text-caption"},ca={class:"no-margin text-caption"},ma=(0,t.Uk)("Блок "),pa=["href"],va={class:"no-margin text-caption text-weight-bold"},wa={class:"no-margin text-caption"},ga={class:"no-margin text-caption"},_a={class:"no-margin text-caption"},fa={class:"no-margin text-caption"},ya={class:"no-margin text-caption"},Ua=(0,t.Uk)("Блок "),ba=["href"],xa={class:"text-h6"},ha={class:"caption q-mb-sm"},ka={class:"caption q-mb-sm"},Sa={key:0,class:"no-margin text-negative text-center"},Wa=(0,t.Uk)(" Подтверждение транзакции отмены ордера "),qa=(0,t.Uk)("Комиссия"),za={components:{TradeModal:Pe}},Ha=Object.assign(za,{__name:"Exchange",setup(e){const a=(0,i.Q)(),l=(0,c.c)(),p=(0,m.s)(),v=(0,n.iH)(null),w=(0,n.iH)(!1),g=(0,n.iH)(!1),_=(0,n.iH)(null),f=(0,n.iH)(null),y=(0,n.iH)("market"),U=(0,n.iH)("active"),b=(0,n.iH)(null),x=(0,n.iH)({}),h=(0,n.iH)([]),k=(0,n.iH)([]),S=(0,n.iH)([]),W=(0,n.iH)([]),q=(0,n.iH)({});let z=(0,n.iH)({}),H=(0,n.iH)(!1),V=(0,n.iH)([]);async function Q(e){g.value=!g.value;const l=await a.getKeyPair(),t=await r.era.tranBySeq(e);Ae.log(t);const n=await r.era.tranRawCancelOrder(l,"name",t.signature,!0);z.value=n,Ae.log(z.value),H.value=!0,g.value=!g.value}async function Z(){g.value=!g.value,Ae.log(z.value.raw);const e=await r.era.broadcast64(z.value.raw);Ae.log(e),H.value=!1,g.value=!g.value}function F(){let e=K.value[v.value];b.value=_.value*e.price}function C(){let e=K.value[v.value];_.value=b.value*e.reversePrice}function j(){_.value=null,b.value=null,z.value={}}async function P(){g.value=!g.value;const e=await a.getKeyPair();let l=K.value[v.value];const t=l.have,n=_.value,u=l.want,o=b.value;Ae.log("have",t),Ae.log("want",u),Ae.log("haveAmount",n),Ae.log("wantAmount",o),await r.era.tranRawOrder(e,"name",t,n,u,o,!0).then((e=>{z.value=e,Ae.log(z.value)})),g.value=!g.value}(0,t.YP)(f,(e=>{if(e){let a={};Ae.log(D.value);let l=Object.keys(D.value).filter((a=>a.toUpperCase().includes(e.toUpperCase())));Ae.log(l);for(let e of l)Ae.log(D.value[e]),a[e]=D.value[e];q.value=a,Ae.log(a)}else q.value={}})),(0,t.YP)(_,(e=>{e>Y.value[K.value[v.value].have][0][1]&&(_.value=Y.value[K.value[v.value].have][0][1],b.value=0,C())}));const A=(0,t.Fl)((()=>a.assets)),K=(0,t.Fl)((()=>a.marketExchange)),D=(0,t.Fl)((()=>a.trade_pairs)),T=(0,t.Fl)((()=>l.addresses[l.currentAddressIdx].address)),Y=((0,t.Fl)((()=>l.assets)),(0,t.Fl)((()=>l.balances))),O=(0,t.Fl)((()=>Object.keys(Y.value)));return(0,t.wF)((async()=>{p.toggleLoadingState();const e=await d.h.get("/api/settings/volumes");Ae.log(e.data),V.value=e.data,await a.getMarketExchangeOrders(),await a.setTradePairs(),h.value=await(0,s.rK)(T.value);let l=[];for(let a of h.value)A.value.find((e=>e.key===a.haveAssetKey))&&A.value.find((e=>e.key===a.wantAssetKey))&&l.push(a);k.value=l.filter((e=>1===e.status||2===e.status)),S.value=l.filter((e=>3===e.status)),W.value=l.filter((e=>4===e.status)),p.toggleLoadingState()})),(e,a)=>{const l=(0,t.up)("page-header"),s=(0,t.up)("q-tab"),i=(0,t.up)("q-tabs"),r=(0,t.up)("q-separator"),d=(0,t.up)("q-avatar"),c=(0,t.up)("q-icon"),m=(0,t.up)("q-item-section"),h=(0,t.up)("q-item-label"),T=(0,t.up)("q-item"),I=(0,t.up)("q-list"),L=(0,t.up)("q-scroll-area"),B=(0,t.up)("q-tab-panel"),N=(0,t.up)("q-input"),$=(0,t.up)("q-badge"),M=(0,t.up)("q-btn"),E=(0,t.up)("q-tab-panels"),R=(0,t.up)("q-card-section"),G=(0,t.up)("q-card-actions"),J=(0,t.up)("q-card"),X=(0,t.up)("q-dialog"),ee=(0,t.up)("page-body"),ae=(0,t.up)("page"),le=(0,t.Q2)("touch-swipe"),te=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ee,null,{default:(0,t.w5)((()=>[(0,t.Wm)(l),Ke,(0,t.wy)(((0,t.wg)(),(0,t.j4)(i,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{"no-caps":"",class:"bg-white",name:"market",label:"Биржа"}),(0,t.Wm)(s,{"no-caps":"",class:"bg-white",name:"own_orders",label:"Мои оффера"})])),_:1},8,["modelValue"])),[[le]]),(0,t.Wm)(r),(0,t.Wm)(E,{modelValue:y.value,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value=e),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{name:"exchange",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{style:{height:"85vh"}},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,n.SU)(K),((e,a)=>(0,t.wy)(((0,t.wg)(),(0,t.j4)(T,{clickable:"",onClick:e=>(v.value=a,w.value=!0),key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("div",De,[(0,t.Wm)(d,{rounded:""},{default:(0,t.w5)((()=>[(0,t._)("img",{src:`/asset_icons/${(0,n.SU)(A).find((a=>a.key===e.have)).icon}`},null,8,Te)])),_:2},1024),(0,t.Wm)(c,{name:"las la-long-arrow-alt-right",size:"30px"}),(0,t.Wm)(d,{rounded:""},{default:(0,t.w5)((()=>[(0,t._)("img",{src:`/asset_icons/${(0,n.SU)(A).find((a=>a.key===e.want)).icon}`},null,8,Ye)])),_:2},1024)])])),_:2},1024),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"text-weight-medium"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)((0,n.SU)(A).find((a=>a.key===e.have)).name)+"/"+(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.want)).name),1)])),_:2},1024),(0,t.Wm)(h,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)(" 1 / "+(0,u.zw)(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[o.F8,(0,n.SU)(O).includes(String(e.have))]]))),128))])),_:1})])),_:1})])),_:1}),(0,t.Wm)(B,{name:"market",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t._)("div",Oe,[(0,t.Wm)(N,{dense:"",outlined:"",rounded:"",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),label:"Поиск"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])]),(0,t.Wm)(r),(0,t.Wm)(L,{style:{height:"75vh"}},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Object.keys(q.value).length>0?q.value:(0,n.SU)(D),((e,a)=>((0,t.wg)(),(0,t.j4)(T,{clickable:"",onClick:a=>(x.value=e,(0,n.SU)(p).toggleTradeModalVisible()),key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"text-weight-medium"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(a.replace("_"," / ")),1)])),_:2},1024),(0,t.Wm)(m,{class:"text-caption"},{default:(0,t.w5)((()=>[(0,n.SU)(V).filter((e=>e.pair===a)).length>0?((0,t.wg)(),(0,t.iD)("span",Ie,[Le,Be,(0,t.Wm)($,{rounded:"",color:"grey-3","text-color":"dark"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).base_volume_24).toFixed(2))+" / "+(0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).quote_volume_24).toFixed(2)),1)])),_:2},1024),Ne,$e,Me,(0,t.Wm)($,{rounded:"",color:"grey-3","text-color":"dark"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).base_volume_1w).toFixed(2))+" / "+(0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).quote_volume_1w).toFixed(2)),1)])),_:2},1024),Ee,Re,Ge,(0,t.Wm)($,{rounded:"",color:"grey-3","text-color":"dark"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).base_volume_1m).toFixed(2))+" / "+(0,u.zw)(parseFloat((0,n.SU)(V).find((e=>e.pair===a)).quote_volume_1m).toFixed(2)),1)])),_:2},1024)])):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),(0,t.Wm)(B,{name:"own_orders",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(i,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),dense:"",align:"justify"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{"no-caps":"",class:"bg-white text-info",name:"active",label:"Активные"}),(0,t.Wm)(s,{"no-caps":"",class:"bg-white text-positive",name:"done",label:"Исполненные"}),(0,t.Wm)(s,{"no-caps":"",class:"bg-white text-negative",name:"cancel",label:"Отмененные"})])),_:1},8,["modelValue"])),[[le]]),(0,t.Wm)(r),(0,t.Wm)(L,{style:{height:"83vh"}},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{modelValue:U.value,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value=e),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{name:"active",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,((e,a)=>((0,t.wg)(),(0,t.j4)(T,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("p",Je,(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.wantAssetKey)).name)+" / "+(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.haveAssetKey)).name),1),(0,t._)("p",Xe,"Кол-во "+(0,u.zw)(e.amountHave),1),(0,t._)("p",ea,"Цена "+(0,u.zw)(e.price),1),(0,t._)("p",aa,"Итого "+(0,u.zw)(e.amountWant),1),(0,t._)("p",la,"Осталось "+(0,u.zw)(e.leftWant),1),(0,t._)("p",ta,[na,(0,t._)("a",{target:"_blank",href:`https://scan.rupay.pro/index/blockexplorer.html?tx=${e.seqNo}&lang=ru`},(0,u.zw)(e.seqNo),9,ua)])])),_:2},1024),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(M,{rounded:"",color:"negative",loading:g.value,onClick:a=>Q(e.seqNo),unelevated:"",outline:"","no-caps":"",size:"12px",label:"Отменить оффер"},null,8,["loading","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,t.Wm)(B,{name:"done",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(S.value,((e,a)=>((0,t.wg)(),(0,t.j4)(T,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("p",oa,(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.wantAssetKey)).name)+" / "+(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.haveAssetKey)).name),1),(0,t._)("p",sa,"Кол-во "+(0,u.zw)(e.amountHave),1),(0,t._)("p",ia,"Цена "+(0,u.zw)(e.price),1),(0,t._)("p",ra,"Итого "+(0,u.zw)(e.amountWant),1),(0,t._)("p",da,"Осталось "+(0,u.zw)(e.leftWant),1),(0,t._)("p",ca,[ma,(0,t._)("a",{target:"_blank",href:`https://scan.rupay.pro/index/blockexplorer.html?tx=${e.seqNo}&lang=ru`},(0,u.zw)(e.seqNo),9,pa)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,t.Wm)(B,{name:"cancel",class:"no-padding"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(W.value,((e,a)=>((0,t.wg)(),(0,t.j4)(T,{key:a},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("p",va,(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.wantAssetKey)).name)+" / "+(0,u.zw)((0,n.SU)(A).find((a=>a.key===e.haveAssetKey)).name),1),(0,t._)("p",wa,"Кол-во "+(0,u.zw)(e.amountHave),1),(0,t._)("p",ga,"Цена "+(0,u.zw)(e.price),1),(0,t._)("p",_a,"Итого "+(0,u.zw)(e.amountWant),1),(0,t._)("p",fa,"Осталось "+(0,u.zw)(e.leftWant),1),(0,t._)("p",ya,[Ua,(0,t._)("a",{target:"_blank",href:`https://scan.rupay.pro/index/blockexplorer.html?tx=${e.seqNo}&lang=ru`},(0,u.zw)(e.seqNo),9,ba)])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(X,{modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=e=>w.value=e),persistent:"","transition-show":"scale","transition-hide":"scale",onBeforeShow:j},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[(0,t._)("div",xa,[(0,t.Uk)("Обмен "+(0,u.zw)((0,n.SU)(A).find((e=>e.key===(0,n.SU)(K)[v.value].have)).name)+" ",1),(0,t.Wm)(c,{name:"las la-long-arrow-alt-right",size:"30px"}),(0,t.Uk)(" "+(0,u.zw)((0,n.SU)(A).find((e=>e.key===(0,n.SU)(K)[v.value].want)).name),1)])])),_:1}),(0,t.Wm)(R,null,{default:(0,t.w5)((()=>[(0,t._)("p",ha,"Отдам "+(0,u.zw)((0,n.SU)(A).find((e=>e.key===(0,n.SU)(K)[v.value].have)).name)+" (баланс "+(0,u.zw)((0,n.SU)(Y)[(0,n.SU)(K)[v.value].have][0][1])+") ",1),(0,t.Wm)(N,{class:"q-mb-md",dense:"",outlined:"",autofocus:"",modelValue:_.value,"onUpdate:modelValue":a[5]||(a[5]=e=>_.value=e),onKeyup:F,type:"number"},null,8,["modelValue"]),(0,t._)("p",ka,"Получу "+(0,u.zw)((0,n.SU)(A).find((e=>e.key===(0,n.SU)(K)[v.value].want)).name),1),(0,t.Wm)(N,{class:"q-mb-md",dense:"",outlined:"",modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=e=>b.value=e),onKeyup:C,type:"number"},null,8,["modelValue"]),(0,n.SU)(z).raw?((0,t.wg)(),(0,t.iD)("p",Sa,"Комиссия : "+(0,u.zw)((0,n.SU)(z).fee),1)):(0,t.kq)("",!0)])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(M,{"no-caps":"",unelevated:"",color:"negative",loading:g.value,outline:"",label:"Отмена"},null,8,["loading"]),[[te]]),(0,n.SU)(z).raw?((0,t.wg)(),(0,t.j4)(M,{key:1,"no-caps":"",unelevated:"",color:"positive",loading:g.value,onClick:Z,label:"Обменять"},null,8,["loading"])):((0,t.wg)(),(0,t.j4)(M,{key:0,"no-caps":"",unelevated:"",color:"positive",disable:!_.value||!b.value,loading:g.value,onClick:P,label:"Запросить комиссию"},null,8,["disable","loading"]))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)((0,n.SU)(Pe),{"trade-pair":x.value},null,8,["trade-pair"]),(0,t.Wm)(X,{modelValue:(0,n.SU)(H),"onUpdate:modelValue":a[8]||(a[8]=e=>(0,n.dq)(H)?H.value=e:H=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(J,{style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(R,{class:"bg-primary text-white"},{default:(0,t.w5)((()=>[Wa])),_:1}),(0,t.Wm)(R,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{separator:"",dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(T,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[qa])),_:1}),(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,u.zw)((0,n.SU)(z).fee),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(G,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(M,{"no-caps":"",unelevated:"",color:"grey-6",loading:g.value,label:"Отмена"},null,8,["loading"]),[[te]]),(0,t.Wm)(M,{"no-caps":"",unelevated:"",loading:g.value,onClick:Z,label:"Ок",color:"positive"},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}}});var Va=l(47817),Qa=l(70900),Za=l(89800),Fa=l(84106),Ca=l(66663),ja=l(22857),Pa=l(33115),Aa=l(20990),Ka=l(64871);const Da=Ha,Ta=Da;Ce()(Ha,"components",{QTabs:Va.Z,QTab:Qa.Z,QSeparator:Se.Z,QTabPanels:Za.Z,QTabPanel:Fa.Z,QScrollArea:Ca.Z,QList:ze.Z,QItem:He.Z,QItemSection:Ve.Z,QAvatar:he.Z,QIcon:ja.Z,QItemLabel:Pa.Z,QInput:We.Z,QBadge:Aa.Z,QBtn:xe.Z,QDialog:ye.Z,QCard:Ue.Z,QCardSection:ke.Z,QCardActions:Qe.Z}),Ce()(Ha,"directives",{TouchSwipe:Ka.Z,ClosePopup:Ze.Z})}}]);