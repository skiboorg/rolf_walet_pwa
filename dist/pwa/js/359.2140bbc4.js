"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var s=l(59835),t=l(60499),n=l(86970),r=l(99407),u=l(98030),c=l(23459),o=l(46190),i=l(6827),d=l(17779),m=l(95269)["Buffer"];const p=(0,s._)("div",{class:"",style:{height:"60px"}},null,-1),g={class:"q-mb-lg"},v={key:0,class:""},w=(0,s._)("p",null,"Основная информация",-1),b={class:"row q-col-gutter-md q-mb-lg"},y={class:"col-6"},h={class:"col-6"},_=(0,s._)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),f={class:"q-mb-none text-caption"},q=(0,s._)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),k={class:"q-mb-none text-caption"},x=(0,s._)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),S={class:"q-mb-none text-caption"},U={key:0,class:"text-negative"},H={__name:"VerifyPerson",setup(e){const a=(0,c.Q)(),l=(0,o.c)();let H=(0,t.iH)(!1),C=(0,t.iH)(null),W=(0,t.iH)(null),Z=(0,t.iH)(null),z=(0,t.iH)(null),A=(0,t.iH)(null),D=(0,t.iH)(null);(0,s.Fl)((()=>l.addresses[l.currentAddressIdx].publicKey)),(0,s.Fl)((()=>l.addresses[l.currentAddressIdx].address));const F=async()=>{H.value=!H.value;const e=await a.getKeyPair(),l=await u.era.tranRawPerson(e,z.value,!1);d.log(l),l.raw&&(A.value=l.raw,D.value=l.fee),H.value=!H.value};async function P(){H.value=!H.value;const e=await u.era.broadcast64(A.value);d.log(e),e.error?i.Z.create({color:"negative",message:e.error.message}):i.Z.create({color:"info",message:"Транзакция отправлена в сеть"}),H.value=!H.value}const Q=async()=>{H.value=!H.value;const e=await r.EraChain.Type.PersonHuman.parse(W.value);d.log(e),z.value=e,Z.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+m.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},H.value=!H.value};function T(){const e=new FileReader;e.addEventListener("load",(async()=>{W.value=e.result,await Q()}),!1),C.value&&e.readAsText(C.value)}return(e,a)=>{const l=(0,s.up)("page-header"),r=(0,s.up)("q-file"),u=(0,s.up)("q-btn"),c=(0,s.up)("q-img"),o=(0,s.up)("page-body"),i=(0,s.up)("page");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{class:"q-px-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(l),p,(0,s._)("div",g,[(0,s.Wm)(r,{modelValue:(0,t.SU)(C),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,t.dq)(C)?C.value=e:C=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,s.Wm)(u,{onClick:T,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Проверить RAW код"})]),(0,t.SU)(Z)?((0,s.wg)(),(0,s.iD)("div",v,[w,(0,s._)("div",b,[(0,s._)("div",y,[(0,s.Wm)(c,{src:(0,t.SU)(Z).image},null,8,["src"])]),(0,s._)("div",h,[_,(0,s._)("p",f,(0,n.zw)((0,t.SU)(Z).name),1),q,(0,s._)("p",k,(0,n.zw)(0===(0,t.SU)(Z).gender?"Мужской":"Женский"),1),x,(0,s._)("p",S,(0,n.zw)(new Date((0,t.SU)(Z).birthday).toLocaleDateString()),1)])]),(0,t.SU)(D)?((0,s.wg)(),(0,s.iD)("p",U,"Комиссия: "+(0,n.zw)((0,t.SU)(D)),1)):(0,s.kq)("",!0),(0,t.SU)(D)?((0,s.wg)(),(0,s.j4)(u,{key:2,onClick:P,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Верифицировать"})):((0,s.wg)(),(0,s.j4)(u,{key:1,onClick:F,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Узнать комиссию"}))])):(0,s.kq)("",!0)])),_:1})])),_:1})}}};var C=l(33171),W=l(24455),Z=l(70335),z=l(69984),A=l.n(z);const D=H,F=D;A()(H,"components",{QFile:C.Z,QBtn:W.Z,QImg:Z.Z})}}]);