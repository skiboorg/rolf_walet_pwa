"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[6771],{86771:(e,l,a)=>{a.r(l),a.d(l,{default:()=>E});var t=a(59835),u=a(60499),s=a(86970),n=a(91569),o=a(18910),d=a(46190),i=a(31655),r=a(99407),c=a(98030),p=a(87270),m=a(23459),v=a(39981),w=a.n(v),_=a(17779);const g=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),b={key:0,class:"q-pa-md"},f=(0,t._)("p",null,"Друзья, Вы можете принять участие в создании дефицита нашей монеты! А значит и в росте ее цены! Ведь чем меньше монет на рынке и больше спрос на нее, тем выше ее рыночная цена! Предлагаем Вам уникальную возможность принять участие в ликвидации монет с рынка и увеличению ее ценности!",-1),y={class:"text-bold"},k={key:0},U={class:"text-bold"},F={class:"text-bold"},W={key:1,class:"no-margin text-bold"},h=(0,t.Uk)("Дата"),q=(0,t.Uk)("Цена"),x=(0,t.Uk)("Остаток"),S=(0,t.Uk)("Выкуплено"),z={key:1},L={class:"text-bold"},O={class:"text-bold"},R={key:0,class:"text-bold"},V={key:1,class:"q-pa-md"},B=(0,t._)("p",null,"Введите реферальный код пригласителя",-1),D={__name:"OlfExclusive",setup(e){const l=(0,m.Q)(),a=(0,i.T)(),v=((0,o.yj)(),(0,u.iH)(0)),D=(0,u.iH)(0),$=75,C=((0,u.iH)([]),(0,d.c)()),H=(0,u.iH)(!1),Q=(0,u.iH)(null),I=(0,u.iH)(null),Z=[{label:"С баланса OLF",value:"OLF"},{label:"Купить OLF",value:"RUB"}],j="https://rupay.pro";async function A(){await(0,p.QO)(P.value.own_reffer_code,"positive","Код скопирован")}const K=async()=>{H.value=!H.value;const e=await n.h.post("/api/p2p/save_code",{wallet:E.value,used_ref_code:Q.value});e.data.success?((0,p.d$)("info",e.data.message),await a.get_user()):(0,p.d$)("negative",e.data.message),H.value=!H.value},T=(0,u.iH)({amount:null,address:"7PsEDvVphCpXwk7NrZyAyHNR7d6Fp57Xcy",title:"Выкуп по "+10*$,message:"",encrypted:!1,fee:0,raw:0}),E=(0,t.Fl)((()=>C.addresses[C.currentAddressIdx].address)),N=(0,t.Fl)((()=>C.balances)),P=(0,t.Fl)((()=>a.user)),X=((0,t.Fl)((()=>C.assets)),(0,t.Fl)((()=>{const e=l.assets.find((e=>2===e.key));return e}))),J=(0,t.Fl)((()=>{if(D.value){let e=parseFloat(parseFloat(X.value.buy_course)+parseFloat(X.value.buy_course*X.value.buy_commission)).toFixed(2);return parseFloat(parseFloat(D.value)/e).toFixed(8)}}));async function Y(){H.value=!H.value;const e=!0,a=await l.getKeyPair(),t=new r.EraChain.Type.KeyPair(a),u={assetKey:2,amount:v.value};_.log(t),_.log(u);const s=await c.era.tranRawSendAsset(t,u,T.value.address,T.value.title,"Откуп OLF",T.value.encrypted,e);_.log(s),s.error?(0,p.d$)("negative",s.error.message):(T.value.fee=s.fee,T.value.raw=s.raw,await G()),H.value=!H.value}async function G(){const e=await c.era.broadcast64(T.value.raw);e.error?(0,p.d$)("negative",e.message):((0,p.d$)("info","Транзакция создана"),_.log(e.signature),await M(e.signature))}const M=async e=>{const l=await n.h.post("/api/p2p/new_olf_ex",{wallet:E.value,amount:v.value,price:10*$,tx:e});l.data.success?((0,p.d$)("positive",l.data.message),v.value=null,await a.get_user()):(0,p.d$)("negative",l.data.message)},ee=async()=>{H.value=!H.value;const e=await w().post(j+"/api/data/create_payment_olf_ex",{wallet:E.value,type:"CARD",want_to_buy:J.value,amount:D.value,currency:"RUB",asset_id:1048643,redirect_url:"https://app.rupay.pro"});H.value=!H.value,e.data.success?window.location.href=e.data.url:(0,p.d$)("negative",JSON.stringify(e.data.message))};return(e,l)=>{const a=(0,t.up)("page-header"),n=(0,t.up)("q-btn"),o=(0,t.up)("q-select"),d=(0,t.up)("q-input"),i=(0,t.up)("q-item-label"),r=(0,t.up)("q-item-section"),c=(0,t.up)("q-item"),p=(0,t.up)("q-list"),m=(0,t.up)("page-body"),w=(0,t.up)("page");return(0,t.wg)(),(0,t.j4)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>{var m,w;return[(0,t.Wm)(a),g,(0,u.SU)(P).used_reffer_code?((0,t.wg)(),(0,t.iD)("div",b,[f,(0,t._)("p",y,[(0,t.Uk)("Ваш реферальный код: "+(0,s.zw)((0,u.SU)(P).own_reffer_code)+" ",1),(0,t.Wm)(n,{color:"blue-7","text-color":"dark",onClick:A,round:"",dense:"",unelevated:"",icon:"las la-clipboard"})]),(0,t.Wm)(o,{outlined:"",options:Z,modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),label:"Выберите тип пополнения",class:"q-mb-md"},null,8,["modelValue"]),"OLF"===(null===(m=I.value)||void 0===m?void 0:m.value)?((0,t.wg)(),(0,t.iD)("div",k,[(0,t._)("p",U,(0,s.zw)(e.$t("your_balance"))+" OLF: "+(0,s.zw)((0,u.SU)(N)[2][0][1]),1),(0,t._)("p",{class:"text-bold"},"Текущий курс: "+(0,s.zw)($)+" RUB"),(0,t._)("p",F,"Выплата при достижении курса "+(0,s.zw)(10*$)+" RUB",1),(0,t.Wm)(d,{outlined:"",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),label:"Сумма OLF",class:"q-mb-md",type:"number"},null,8,["modelValue"]),parseFloat(v.value)>0?((0,t.wg)(),(0,t.j4)(n,{key:0,dense:"",class:"full-width q-py-md q-mb-lg",onClick:Y,loading:H.value,color:"positive","no-caps":"",unelevated:"",disable:parseFloat(v.value)>parseFloat((0,u.SU)(N)[2][0][1]),label:`${e.$t("send_btn")}`},null,8,["loading","disable","label"])):(0,t.kq)("",!0),(0,u.SU)(P).exclusive_holds.length>0?((0,t.wg)(),(0,t.iD)("p",W,"Текущие выкупы")):(0,t.kq)("",!0),(0,u.SU)(P).exclusive_holds.length>0?((0,t.wg)(),(0,t.j4)(p,{key:2,dense:"",separator:""},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[h])),_:1})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[q])),_:1})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[x])),_:1})])),_:1}),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[S])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,u.SU)(P).exclusive_holds,(e=>((0,t.wg)(),(0,t.j4)(c,{dense:"",key:e.id},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(new Date(e.created_at).toLocaleDateString()),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(parseInt(e.price))+" RUB",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(parseFloat(e.amount))+" OLF",1)])),_:2},1024),(0,t.Wm)(i,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(parseFloat(e.amount)*parseInt(e.price))+" RUB",1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(parseFloat(e.ostatok))+" OLF",1)])),_:2},1024),(0,t.Wm)(i,{caption:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(parseFloat(e.ostatok)*parseInt(e.price))+" RUB",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,t.kq)("",!0)])):(0,t.kq)("",!0),"RUB"===(null===(w=I.value)||void 0===w?void 0:w.value)?((0,t.wg)(),(0,t.iD)("div",z,[(0,t._)("p",L,"Комиссия платежной системы: "+(0,s.zw)(100*parseFloat((0,u.SU)(X).buy_commission))+"%",1),(0,t._)("p",O,"Курс покупки: "+(0,s.zw)((0,u.SU)(X).buy_course)+" RUB",1),(0,t.Wm)(d,{modelValue:D.value,"onUpdate:modelValue":l[2]||(l[2]=e=>D.value=e),type:"number",label:"Введите сумму пополнения в RUB",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,u.SU)(J)?((0,t.wg)(),(0,t.iD)("p",R,"Вы получите: "+(0,s.zw)((0,u.SU)(J))+" OLF",1)):(0,t.kq)("",!0),(0,t.Wm)(n,{label:"Купить",loading:H.value,color:"primary","no-caps":"",class:"full-width",unelevated:"",onClick:ee,disable:!(0,u.SU)(J)},null,8,["loading","disable"])])):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.iD)("div",V,[B,(0,t.Wm)(d,{modelValue:Q.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Q.value=e),outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,t.Wm)(n,{label:"Сохранить",loading:H.value,color:"primary","no-caps":"",class:"full-width",unelevated:"",onClick:K,disable:!Q.value},null,8,["loading","disable"])]))]})),_:1})])),_:1})}}};var $=a(24455),C=a(57786),H=a(13119),Q=a(13246),I=a(490),Z=a(76749),j=a(33115),A=a(69984),K=a.n(A);const T=D,E=T;K()(D,"components",{QBtn:$.Z,QSelect:C.Z,QInput:H.Z,QList:Q.Z,QItem:I.Z,QItemSection:Z.Z,QItemLabel:j.Z})}}]);