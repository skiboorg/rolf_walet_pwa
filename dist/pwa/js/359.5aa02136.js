"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});var t=l(59835),n=l(60499),s=l(86970),i=l(18910),u=l(99407),c=l(98030),r=l(23459),o=l(46190),d=l(6827),m=l(17779),w=l(95269)["Buffer"];const g=(0,t._)("div",{class:"",style:{height:"60px"}},null,-1),p={key:0,class:"q-mb-lg"},v={key:1,class:""},b=(0,t._)("p",null,"Основная информация",-1),y={class:"row q-col-gutter-md q-mb-lg"},f={class:"col-6"},h={class:"col-6"},q=(0,t._)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),_={class:"q-mb-none text-caption"},k=(0,t._)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),x={class:"q-mb-none text-caption"},S=(0,t._)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),U={class:"q-mb-none text-caption"},H={key:0,class:"text-negative"},W={key:1,class:"text-negative"},C={__name:"VerifyPerson",setup(e){const a=(0,i.tv)(),l=(0,r.Q)(),C=(0,o.c)();let D=(0,n.iH)(!1),P=(0,n.iH)(null),z=(0,n.iH)(null),A=(0,n.iH)(null),F=(0,n.iH)(null),Q=(0,n.iH)(null),R=(0,n.iH)(null),T=(0,n.iH)(null);(0,t.Fl)((()=>C.addresses[C.currentAddressIdx].publicKey)),(0,t.Fl)((()=>C.addresses[C.currentAddressIdx].address));async function V(){const e=await l.getKeyPair(),a=await c.era.tranRawPerson(e,F.value,!1);m.log(a),a.raw&&(Q.value=a.raw,R.value=a.fee)}async function Z(){const e=await l.getKeyPair(),a=await c.era.tranRawPersonCertify(e,F.value,!1);m.log(a),a.raw&&(Q.value=a.raw,T.value=a.fee)}async function I(){D.value=!0,await V(),await K(),await Z(),await K(),D.value=!1}async function K(){const e=await c.era.broadcast(Q.value);m.log(e),d.Z.create({color:"info",message:e.message}),D.value=!1,await a.back()}const B=async()=>{D.value=!D.value;const e=await u.EraChain.Type.PersonHuman.parse(z.value);m.log(e),F.value=e,A.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+w.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},D.value=!D.value};function E(){const e=new FileReader;e.addEventListener("load",(async()=>{z.value=e.result,await B()}),!1),P.value&&e.readAsText(P.value)}return(e,a)=>{const l=(0,t.up)("page-header"),i=(0,t.up)("q-file"),u=(0,t.up)("q-btn"),c=(0,t.up)("q-img"),r=(0,t.up)("page-body"),o=(0,t.up)("page");return(0,t.wg)(),(0,t.j4)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"q-px-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(l),g,(0,n.SU)(F)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(i,{modelValue:(0,n.SU)(P),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(P)?P.value=e:P=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,t.Wm)(u,{onClick:E,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Проверить RAW код"})])),(0,n.SU)(A)?((0,t.wg)(),(0,t.iD)("div",v,[b,(0,t._)("div",y,[(0,t._)("div",f,[(0,t.Wm)(c,{src:(0,n.SU)(A).image},null,8,["src"])]),(0,t._)("div",h,[q,(0,t._)("p",_,(0,s.zw)((0,n.SU)(A).name),1),k,(0,t._)("p",x,(0,s.zw)(0===(0,n.SU)(A).gender?"Мужской":"Женский"),1),S,(0,t._)("p",U,(0,s.zw)(new Date((0,n.SU)(A).birthday).toLocaleDateString()),1)])]),(0,n.SU)(R)?((0,t.wg)(),(0,t.iD)("p",H,"Комиссия первой транзакции: "+(0,s.zw)((0,n.SU)(R)),1)):(0,t.kq)("",!0),(0,n.SU)(T)?((0,t.wg)(),(0,t.iD)("p",W,"Комиссия второй транзакции: "+(0,s.zw)((0,n.SU)(T)),1)):(0,t.kq)("",!0),(0,t.Wm)(u,{onClick:I,loading:(0,n.SU)(D),"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Верифицировать"},null,8,["loading"])])):(0,t.kq)("",!0)])),_:1})])),_:1})}}};var D=l(33171),P=l(24455),z=l(70335),A=l(69984),F=l.n(A);const Q=C,R=Q;F()(C,"components",{QFile:D.Z,QBtn:P.Z,QImg:z.Z})}}]);