"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[1950],{21950:(e,l,a)=>{a.r(l),a.d(l,{default:()=>H});a(40702);var u=a(59835),t=a(60499),n=a(61957),r=a(86970),s=a(91569),o=a(87270),d=a(46190),i=a(99407),v=a(98030),m=a(23459),p=a(17779);const c=(0,u._)("div",{class:"",style:{height:"50px"}},null,-1),g={class:"q-pa-md"},y=(0,u._)("p",{class:"bold"}," Для выпуска Активов на вашем балансе должны быть 1000 монет RUPAY. За выпуск каждых 100000 монет Взымается оплата 10 монет RUPAY + OLF 0.2 ",-1),w={key:0},b=(0,u._)("p",{class:"text-bold"},"Заявка на создание актива",-1),f={key:0,class:"text-negative text-bold"},V=(0,u.Uk)(" За выпуск актива будет держана коммиссия"),_=(0,u._)("br",null,null,-1),h=(0,u._)("br",null,null,-1),k={key:2},U={key:1},F=(0,u._)("p",{class:"text-negative text-bold text-center"},"Для создания актива нужно быть верифицированным пользователем и иметь на балансе 1000 RUPAY",-1),x=[F],P={__name:"CreateAsset",setup(e){const l=(0,d.c)(),a=(0,t.iH)(null),F=(0,t.iH)(!1),P=(0,t.iH)(!1),S=(0,t.iH)(""),W=(0,m.Q)(),A=(0,t.iH)({amount:null,accurase:null,title:null,text:null,add_to_market:!1,course_rub:0,wallet:null,telega:null}),q=(0,u.Fl)((()=>{if(A.value.amount)return 10*Math.ceil(A.value.amount/1e5)})),C=(0,u.Fl)((()=>{if(A.value.amount)return.2*Math.ceil(A.value.amount/1e5)})),$=(0,u.Fl)((()=>l.verifyPersonData)),z=(0,u.Fl)((()=>l.addresses[l.currentAddressIdx].address)),D=(0,u.Fl)((()=>parseFloat(H.value[1][0][1])+parseFloat(H.value[1][1][1]))),H=(0,u.Fl)((()=>l.balances)),R=async()=>{F.value=!F.value,S.value="",A.value.wallet=z.value;let e=new FormData;for(let[l,a]of Object.entries(A.value))e.append(l,JSON.stringify(a));e.append("image",a.value),(0,s.h)({method:"post",url:"/api/settings/new_asset",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((e=>{(0,o.d$)("positive","Заявка успешно отправлена"),P.value=!0})).catch((e=>{let l=Object.keys(e.response.data);for(let a of l)S.value+=e.response.data[a][0];(0,o.d$)("negative",S.value)})),F.value=!F.value},K=(0,t.iH)({amount:null,address:"7PsEDvVphCpXwk7NrZyAyHNR7d6Fp57Xcy",title:"Заявка создания актива",message:"",encrypted:!1,fee:0,raw:0});async function Q(){F.value=!F.value;const e=!0,l=await W.getKeyPair(),a=new i.EraChain.Type.KeyPair(l),u={assetKey:1,amount:q.value};p.log(a),p.log(u);const t=await v.era.tranRawSendAsset(a,u,K.value.address,K.value.title,K.value.message,K.value.encrypted,e);p.log(t),t.error?(0,o.d$)("negative",t.error.message):(K.value.fee=t.fee,K.value.raw=t.raw,await O()),F.value=!F.value}async function Z(){F.value=!F.value;const e=!0,l=await W.getKeyPair(),a=new i.EraChain.Type.KeyPair(l),u={assetKey:2,amount:C.value};p.log(a),p.log(u);const t=await v.era.tranRawSendAsset(a,u,K.value.address,K.value.title,K.value.message,K.value.encrypted,e);p.log(t),t.error?(0,o.d$)("negative",t.error.message):(K.value.fee=t.fee,K.value.raw=t.raw,await T()),F.value=!F.value}async function O(){const e=await v.era.broadcast64(K.value.raw);e.error?(0,o.d$)("negative",e.message):((0,o.d$)("info","Транзакция создана"),await Z())}async function T(){const e=await v.era.broadcast64(K.value.raw);e.error?(0,o.d$)("negative",e.message):(await R(),(0,o.d$)("info","Транзакция создана"))}return(e,l)=>{const s=(0,u.up)("page-header"),o=(0,u.up)("q-file"),d=(0,u.up)("q-input"),i=(0,u.up)("q-checkbox"),v=(0,u.up)("q-btn"),m=(0,u.up)("q-form"),p=(0,u.up)("page-body"),S=(0,u.up)("page");return(0,u.wg)(),(0,u.j4)(S,null,{default:(0,u.w5)((()=>[(0,u.Wm)(p,null,{default:(0,u.w5)((()=>[(0,u.Wm)(s),c,(0,u._)("div",g,[y,parseFloat((0,t.SU)(D))>=1e3&&(0,t.SU)($)?((0,u.wg)(),(0,u.iD)("div",w,[b,(0,u.Wm)(m,{onSubmit:(0,n.iM)(Q,["prevent"])},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{outlined:"",modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),label:"Иконка актива*","lazy-rules":"",rules:[e=>null!==e||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,u.Wm)(d,{outlined:"",modelValue:A.value.title,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value.title=e),label:"Название актива*","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,u.Wm)(d,{outlined:"",modelValue:A.value.amount,"onUpdate:modelValue":l[2]||(l[2]=e=>A.value.amount=e),label:"Выпускаемый объем*",type:"number","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,u.Wm)(d,{outlined:"",modelValue:A.value.accurase,"onUpdate:modelValue":l[3]||(l[3]=e=>A.value.accurase=e),label:"Кол-во знаков после запятой*",type:"number","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,u.Wm)(d,{outlined:"",modelValue:A.value.text,"onUpdate:modelValue":l[4]||(l[4]=e=>A.value.text=e),class:"q-mb-md",label:"Описание",type:"textarea"},null,8,["modelValue"]),(0,u.Wm)(d,{outlined:"",modelValue:A.value.telega,"onUpdate:modelValue":l[5]||(l[5]=e=>A.value.telega=e),label:"Ваш телеграм для связи*",type:"number","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},null,8,["modelValue","rules"]),(0,u.Wm)(i,{modelValue:A.value.add_to_market,"onUpdate:modelValue":l[6]||(l[6]=e=>A.value.add_to_market=e),label:"Разместить на бирже?"},null,8,["modelValue"]),(0,t.SU)(q)?((0,u.wg)(),(0,u.iD)("p",f,[V,_,(0,u.Uk)(" "+(0,r.zw)((0,t.SU)(q))+" RUPAY",1),h,(0,u.Uk)(" "+(0,r.zw)((0,t.SU)(C))+" OLF ",1)])):(0,u.kq)("",!0),P.value?((0,u.wg)(),(0,u.iD)("p",k," Отлично В течении 24 часов эмиссия будет зачислена на Ваш кошелек, наши менеджеры с Вами свяжутся")):((0,u.wg)(),(0,u.j4)(v,{key:1,loading:F.value,label:"Отправить заявку",color:"primary","no-caps":"",class:"full-width",padding:"md",type:"submit"},null,8,["loading"]))])),_:1},8,["onSubmit"])])):((0,u.wg)(),(0,u.iD)("div",U,x))])])),_:1})])),_:1})}}};var S=a(8326),W=a(33837),A=a(13119),q=a(11221),C=a(24455),$=a(69984),z=a.n($);const D=P,H=D;z()(P,"components",{QForm:S.Z,QFile:W.Z,QInput:A.Z,QCheckbox:q.Z,QBtn:C.Z})}}]);