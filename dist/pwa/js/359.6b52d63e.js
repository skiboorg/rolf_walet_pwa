"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Q});var n=l(59835),t=l(60499),s=l(86970),i=l(18910),u=l(99407),c=l(98030),o=l(23459),d=l(46190),r=l(6827),m=l(17779),g=l(95269)["Buffer"];const p=(0,n._)("div",{class:"",style:{height:"60px"}},null,-1),w={key:0,class:"q-mb-lg"},v={key:1,class:""},b=(0,n._)("p",null,"Основная информация",-1),y={class:"row q-col-gutter-md q-mb-lg"},h={class:"col-6"},f={class:"col-6"},q=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),_={class:"q-mb-none text-caption"},k=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),S={class:"q-mb-none text-caption"},x=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),U={class:"q-mb-none text-caption"},H={key:0,class:"text-negative"},C={__name:"VerifyPerson",setup(e){const a=(0,i.tv)(),l=(0,o.Q)(),C=(0,d.c)();let W=(0,t.iH)(!1),D=(0,t.iH)(null),z=(0,t.iH)(null),A=(0,t.iH)(null),F=(0,t.iH)(null),P=(0,t.iH)(null),Q=(0,t.iH)(null);(0,n.Fl)((()=>C.addresses[C.currentAddressIdx].publicKey)),(0,n.Fl)((()=>C.addresses[C.currentAddressIdx].address));async function T(){W.value=!0;const e=await l.getKeyPair(),a=await c.era.tranRawPerson(e,F.value,!1);m.log(a),a.raw&&(P.value=a.raw,Q.value=a.fee),W.value=!1}async function V(){W.value=!0;const e=await c.era.broadcast(P.value);m.log(e),r.Z.create({color:"info",message:e.message}),W.value=!1,await a.back()}const Z=async()=>{W.value=!W.value;const e=await u.EraChain.Type.PersonHuman.parse(z.value);m.log(e),F.value=e,A.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+g.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},W.value=!W.value};function j(){const e=new FileReader;e.addEventListener("load",(async()=>{z.value=e.result,await Z()}),!1),D.value&&e.readAsText(D.value)}return(e,a)=>{const l=(0,n.up)("page-header"),i=(0,n.up)("q-file"),u=(0,n.up)("q-btn"),c=(0,n.up)("q-img"),o=(0,n.up)("page-body"),d=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"q-px-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(l),p,(0,t.SU)(F)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",w,[(0,n.Wm)(i,{modelValue:(0,t.SU)(D),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,t.dq)(D)?D.value=e:D=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,n.Wm)(u,{onClick:j,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Проверить RAW код"})])),(0,t.SU)(A)?((0,n.wg)(),(0,n.iD)("div",v,[b,(0,n._)("div",y,[(0,n._)("div",h,[(0,n.Wm)(c,{src:(0,t.SU)(A).image},null,8,["src"])]),(0,n._)("div",f,[q,(0,n._)("p",_,(0,s.zw)((0,t.SU)(A).name),1),k,(0,n._)("p",S,(0,s.zw)(0===(0,t.SU)(A).gender?"Мужской":"Женский"),1),x,(0,n._)("p",U,(0,s.zw)(new Date((0,t.SU)(A).birthday).toLocaleDateString()),1)])]),(0,t.SU)(Q)?((0,n.wg)(),(0,n.iD)("p",H,"Комиссия: "+(0,s.zw)((0,t.SU)(Q)),1)):(0,n.kq)("",!0),(0,t.SU)(Q)?((0,n.wg)(),(0,n.j4)(u,{key:2,onClick:V,loading:(0,t.SU)(W),"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Верифицировать"},null,8,["loading"])):((0,n.wg)(),(0,n.j4)(u,{key:1,onClick:T,loading:(0,t.SU)(W),"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Узнать комиссию"},null,8,["loading"]))])):(0,n.kq)("",!0)])),_:1})])),_:1})}}};var W=l(33171),D=l(24455),z=l(70335),A=l(69984),F=l.n(A);const P=C,Q=P;F()(C,"components",{QFile:W.Z,QBtn:D.Z,QImg:z.Z})}}]);