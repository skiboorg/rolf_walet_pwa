"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Q});var t=l(59835),n=l(60499),s=l(86970),c=l(18910),i=l(99407),r=l(98030),d=l(23459),u=l(46190),o=l(6827),m=l(17779),w=l(95269)["Buffer"];const g=(0,t._)("div",{class:"",style:{height:"60px"}},null,-1),p={key:0,class:"q-mb-lg"},_={key:1,class:""},v={class:"row q-col-gutter-md q-mb-lg"},b={class:"col-6"},h={class:"col-6"},y={class:"q-mb-none text-weight-medium"},f={class:"q-mb-none text-caption"},k={class:"q-mb-none text-weight-medium"},q={class:"q-mb-none text-caption"},x={class:"q-mb-none text-weight-medium"},S={class:"q-mb-none text-caption"},U={key:0,class:"text-negative"},z={key:1,class:"text-negative"},$={__name:"VerifyPerson",setup(e){const a=(0,c.tv)(),l=(0,d.Q)(),$=(0,u.c)();let H=(0,n.iH)(!1),C=(0,n.iH)(null),D=(0,n.iH)(null),W=(0,n.iH)(null),F=(0,n.iH)(null),P=(0,n.iH)(null),Q=(0,n.iH)(null),T=(0,n.iH)(null);(0,t.Fl)((()=>$.addresses[$.currentAddressIdx].publicKey)),(0,t.Fl)((()=>$.addresses[$.currentAddressIdx].address));async function V(){const e=await l.getKeyPair(),a=await r.era.tranRawPersonCertify(e,F.value,!1);m.log(a),a.raw&&(P.value=a.raw,T.value=a.fee)}async function Z(){H.value=!0,await V(),await A(),H.value=!1}async function A(){const e=await r.era.broadcast(P.value);m.log(e),o.Z.create({color:"info",message:e.message}),H.value=!1,await a.back()}const I=async()=>{H.value=!H.value;const e=await i.EraChain.Type.PersonHuman.parse(D.value);m.log(e),F.value=e,W.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+w.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},H.value=!H.value};function B(){const e=new FileReader;e.addEventListener("load",(async()=>{D.value=e.result,await I()}),!1),C.value&&e.readAsText(C.value)}return(e,a)=>{const l=(0,t.up)("page-header"),c=(0,t.up)("q-file"),i=(0,t.up)("q-btn"),r=(0,t.up)("q-img"),d=(0,t.up)("page-body"),u=(0,t.up)("page");return(0,t.wg)(),(0,t.j4)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,{class:"q-px-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(l),g,(0,n.SU)(F)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",p,[(0,t.Wm)(c,{rounded:"",modelValue:(0,n.SU)(C),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.dq)(C)?C.value=e:C=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,t.Wm)(i,{rounded:"",onClick:B,"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:e.$t("check_raw")},null,8,["label"])])),(0,n.SU)(W)?((0,t.wg)(),(0,t.iD)("div",_,[(0,t._)("p",null,(0,s.zw)(e.$t("check_raw_info")),1),(0,t._)("div",v,[(0,t._)("div",b,[(0,t.Wm)(r,{src:(0,n.SU)(W).image},null,8,["src"])]),(0,t._)("div",h,[(0,t._)("p",y,(0,s.zw)(e.$t("check_raw_fio")),1),(0,t._)("p",f,(0,s.zw)((0,n.SU)(W).name),1),(0,t._)("p",k,(0,s.zw)(e.$t("check_raw_gender")),1),(0,t._)("p",q,(0,s.zw)(0===(0,n.SU)(W).gender?e.$t("gender_m"):e.$t("gender_f")),1),(0,t._)("p",x,(0,s.zw)(e.$t("check_raw_birth")),1),(0,t._)("p",S,(0,s.zw)(new Date((0,n.SU)(W).birthday).toLocaleDateString()),1)])]),(0,n.SU)(Q)?((0,t.wg)(),(0,t.iD)("p",U,(0,s.zw)(e.$t("check_raw_comm1"))+": "+(0,s.zw)((0,n.SU)(Q)),1)):(0,t.kq)("",!0),(0,n.SU)(T)?((0,t.wg)(),(0,t.iD)("p",z,(0,s.zw)(e.$t("check_raw_comm2"))+": "+(0,s.zw)((0,n.SU)(T)),1)):(0,t.kq)("",!0),(0,t.Wm)(i,{onClick:Z,rounded:"",loading:(0,n.SU)(H),"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:e.$t("check_raw_verify")},null,8,["loading","label"])])):(0,t.kq)("",!0)])),_:1})])),_:1})}}};var H=l(33837),C=l(24455),D=l(70335),W=l(69984),F=l.n(W);const P=$,Q=P;F()($,"components",{QFile:H.Z,QBtn:C.Z,QImg:D.Z})}}]);