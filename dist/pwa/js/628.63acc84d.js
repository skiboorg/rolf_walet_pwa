"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[628],{76628:(e,a,l)=>{l.r(a),l.d(a,{default:()=>B});var s=l(59835),t=l(86970),u=l(60499),n=l(91569),o=l(18910),d=l(46190),p=l(31655),r=l(87270);const i=(0,s._)("div",{class:"",style:{height:"50px"}},null,-1),v={class:"q-mb-sm"},m={class:"text-bold"},c=(0,s.Uk)(", минимальный объем "),_={class:"text-bold"},w={class:"text-bold"},b=(0,s._)("br",null,null,-1),x={key:0,class:"text-positive text-bold"},g={key:1,class:"text-negative text-bold"},f=(0,s.Uk)(", адрес кошелька: "),h=["href"],k=(0,s.Uk)(", сделок проведено "),y={class:"text-bold"},z=(0,s._)("br",null,null,-1),U=(0,s._)("span",{class:"text-bold"},"Условия сделки:",-1),q=(0,s._)("br",null,null,-1),F=(0,s._)("span",{class:"text-bold"},null,-1),W=(0,s.Uk)("Введите объем сделки минимум: "),S={class:"text-bold"},V=(0,s.Uk)(", максимум: "),C={class:"text-bold"},H=(0,s._)("p",null,"Выберите платежную систему",-1),Q={__name:"Offer",setup(e){const a=(0,o.yj)(),l=(0,o.tv)(),Q=(0,d.c)(),Z=(0,p.T)(),$=(0,u.iH)({asset:{name:""},user:{wallet:"",total_trades:0}}),T=(0,u.iH)(null),j=(0,u.iH)(null),D=(0,u.iH)(!1),I=(0,s.Fl)((()=>Z.user)),A=((0,s.Fl)((()=>!!$.is_sell&&$.user.wallet===I.value.wallet)),(0,s.Fl)((()=>Q.addresses[Q.currentAddressIdx].address))),B=(0,s.Fl)((()=>parseFloat(T.value)>=$.value.min_amount&&parseFloat(T.value)<=$.value.amount&&j.value)),O=(0,s.Fl)((()=>{if(T.value)return parseFloat(T.value)*$.value.course}));async function E(){D.value=!D.value;const e=await n.h.post("/api/p2p/create_trade",{offer_id:$.value.id,amount:T.value,payment_type:j.value.id,opponent:A.value});e.data.success?(0,r.d)("positive",e.data.message):(0,r.d)("negative",e.data.message),D.value=!D.value,await Z.get_own_trades(),l.push({name:"p2p_index"})}return(0,s.wF)((async()=>{let e=a.params.offer_id;const l=await n.h.get(`/api/p2p/offer?id=${e}`);$.value=l.data})),(e,a)=>{const l=(0,s.up)("page-header"),n=(0,s.up)("q-separator"),o=(0,s.up)("q-btn"),d=(0,s.up)("q-input"),p=(0,s.up)("q-select"),r=(0,s.up)("page-body"),Q=(0,s.up)("page");return(0,s.wg)(),(0,s.j4)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"q-pa-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(l),i,(0,s._)("p",v,[(0,s.Uk)(" Оффер #"+(0,t.zw)($.value.id)+" на "+(0,t.zw)($.value.is_sell?"покупку":"продажу")+" ",1),(0,s._)("span",m,(0,t.zw)($.value.amount)+" "+(0,t.zw)($.value.asset.name),1),c,(0,s._)("span",_,(0,t.zw)($.value.min_amount)+" "+(0,t.zw)($.value.asset.name),1),(0,s.Uk)(", курс "+(0,t.zw)($.value.is_sell?"покупки":"продажи")+" ",1),(0,s._)("span",w,(0,t.zw)($.value.course)+" руб.",1),b,(0,s.Uk)(" "+(0,t.zw)($.value.is_sell?"Продавец":"Покупатель")+" ",1),$.value.user.is_online?((0,s.wg)(),(0,s.iD)("span",x," в сети")):((0,s.wg)(),(0,s.iD)("span",g," не в сети")),f,(0,s._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${$.value.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold",target:"_blank"},(0,t.zw)($.value.user.wallet),9,h),k,(0,s._)("span",y,(0,t.zw)($.value.user.total_trades),1),z,U,q,(0,s.Uk)((0,t.zw)($.value.rules),1)]),(0,s.Wm)(n,{spaced:"md"}),F,(0,s._)("p",null,[W,(0,s._)("span",S,(0,t.zw)($.value.min_amount)+" "+(0,t.zw)($.value.asset.name),1),V,(0,s._)("span",C,(0,t.zw)($.value.amount)+" "+(0,t.zw)($.value.asset.name),1)]),(0,s.Wm)(d,{outlined:"",rounded:"",modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=e=>T.value=e),type:"number",label:`Объем сделки в ${$.value.asset.name}`,class:"q-mb-md"},{append:(0,s.w5)((()=>[(0,s.Wm)(o,{onClick:a[0]||(a[0]=e=>T.value=$.value.amount),size:"10px",unelevated:"",color:"primary","no-caps":"",rounded:"",label:"Максимум"})])),_:1},8,["modelValue","label"]),H,(0,s.Wm)(p,{outlined:"",rounded:"",modelValue:j.value,"onUpdate:modelValue":a[2]||(a[2]=e=>j.value=e),options:$.value.payment_types,class:"q-mb-md",label:"Платежная система",behavior:"menu"},null,8,["modelValue","options"]),(0,s.Wm)(o,{disable:!(0,u.SU)(B),label:(0,u.SU)(B)?`Создать сделку на ${(0,u.SU)(O)} руб`:"Заполните все поля",class:"full-width q-py-md",color:(0,u.SU)(B)?"positive":"negative","no-caps":"",onClick:E,loading:D.value,rounded:"",unelevated:""},null,8,["disable","label","color","loading"])])),_:1})])),_:1})}}};var Z=l(50926),$=l(13119),T=l(24455),j=l(18401),D=l(69984),I=l.n(D);const A=Q,B=A;I()(Q,"components",{QSeparator:Z.Z,QInput:$.Z,QBtn:T.Z,QSelect:j.Z})}}]);