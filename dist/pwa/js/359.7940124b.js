"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var n=l(59835),s=l(60499),t=l(86970),i=l(99407),o=l(98030),r=l(23459),u=l(46190),c=l(6827),d=l(17779),m=l(95269)["Buffer"];const g=(0,n._)("div",{class:"",style:{height:"60px"}},null,-1),p={class:"q-mb-lg"},w={key:0,class:""},v=(0,n._)("p",null,"Основная информация",-1),b={class:"row q-col-gutter-md q-mb-lg"},y={class:"col-6"},h={class:"col-6"},f=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),_={class:"q-mb-none text-caption"},q=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),k={class:"q-mb-none text-caption"},S=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),U={class:"q-mb-none text-caption"},x={key:0,class:"text-negative"},H={__name:"VerifyPerson",setup(e){const a=(0,r.Q)(),l=(0,u.c)();let H=(0,s.iH)(!1),C=(0,s.iH)(null),W=(0,s.iH)(null),z=(0,s.iH)(null),Z=(0,s.iH)(null),A=(0,s.iH)(null),D=(0,s.iH)(null);(0,n.Fl)((()=>l.addresses[l.currentAddressIdx].publicKey)),(0,n.Fl)((()=>l.addresses[l.currentAddressIdx].address));async function F(){H.value=!0;const e=await a.getKeyPair(),l=await o.era.tranRawPerson(e,Z.value,!1);d.log(l),l.raw&&(A.value=l.raw,D.value=l.fee),H.value=!1}async function P(){H.value=!0;const e=await o.era.broadcast(A.value);d.log(e),e.error?c.Z.create({color:"negative",message:e.error.message}):c.Z.create({color:"info",message:"Транзакция отправлена в сеть"}),H.value=!1}const Q=async()=>{H.value=!H.value;const e=await i.EraChain.Type.PersonHuman.parse(W.value);d.log(e),Z.value=e,z.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+m.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},H.value=!H.value};function T(){const e=new FileReader;e.addEventListener("load",(async()=>{W.value=e.result,await Q()}),!1),C.value&&e.readAsText(C.value)}return(e,a)=>{const l=(0,n.up)("page-header"),i=(0,n.up)("q-file"),o=(0,n.up)("q-btn"),r=(0,n.up)("q-img"),u=(0,n.up)("page-body"),c=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"q-px-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(l),g,(0,n._)("div",p,[(0,n.Wm)(i,{modelValue:(0,s.SU)(C),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.dq)(C)?C.value=e:C=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,n.Wm)(o,{onClick:T,"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Проверить RAW код"})]),(0,s.SU)(z)?((0,n.wg)(),(0,n.iD)("div",w,[v,(0,n._)("div",b,[(0,n._)("div",y,[(0,n.Wm)(r,{src:(0,s.SU)(z).image},null,8,["src"])]),(0,n._)("div",h,[f,(0,n._)("p",_,(0,t.zw)((0,s.SU)(z).name),1),q,(0,n._)("p",k,(0,t.zw)(0===(0,s.SU)(z).gender?"Мужской":"Женский"),1),S,(0,n._)("p",U,(0,t.zw)(new Date((0,s.SU)(z).birthday).toLocaleDateString()),1)])]),(0,n.Uk)(" "+(0,t.zw)((0,s.SU)(H))+" ",1),(0,s.SU)(D)?((0,n.wg)(),(0,n.iD)("p",x,"Комиссия: "+(0,t.zw)((0,s.SU)(D)),1)):(0,n.kq)("",!0),(0,s.SU)(D)?((0,n.wg)(),(0,n.j4)(o,{key:2,onClick:P,loading:(0,s.SU)(H),"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Верифицировать"},null,8,["loading"])):((0,n.wg)(),(0,n.j4)(o,{key:1,onClick:F,loading:(0,s.SU)(H),"no-caps":"",unelevated:"",class:"full-width",color:"primary",label:"Узнать комиссию"},null,8,["loading"]))])):(0,n.kq)("",!0)])),_:1})])),_:1})}}};var C=l(33171),W=l(24455),z=l(70335),Z=l(69984),A=l.n(Z);const D=H,F=D;A()(H,"components",{QFile:C.Z,QBtn:W.Z,QImg:z.Z})}}]);