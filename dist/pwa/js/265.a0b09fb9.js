"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[265],{95265:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Q});var n=l(59835),t=l(60499),u=l(86970),s=l(46190),o=l(23459),d=l(98030),m=l(39981),i=l.n(m),r=l(87270),c=l(99407),p=l(17779);const v=(0,n._)("div",{class:"",style:{height:"60px"}},null,-1),w={class:"q-mb-lg"},g={key:0},b=(0,n._)("p",{class:"q-mb-sm text-negative"},"Внимание! ФИО верифицированного пользователя должно совпадать с ФИО владельца карты.",-1),_=(0,n._)("p",{class:"q-mb-sm"},"Срок вывода зависит от банка и может занимать до 5 рабочих дней",-1),U=(0,n._)("p",{class:"q-mb-sm text-caption"},"Номер карты*",-1),y=(0,n._)("p",{class:"q-mb-sm text-caption"},"Название банка*",-1),q=(0,n._)("p",{class:"q-mb-sm text-caption"},"ФИО получателя (владельца карты)*",-1),f={class:"q-mb-sm text-caption"},h=(0,n.Uk)("Сумма вывода в рублях* (Ваш баланс "),k=(0,n.Uk)(" RUB)"),S=(0,n._)("p",{class:"q-mb-sm text-caption"},"Минимальная сумма вывода 5000 RUB",-1),V={key:1},A={class:"text-center"},x=(0,n.Uk)("Вывод средств доступен только "),W=(0,n.Uk)("верифицированным"),H=(0,n.Uk)(" пользователям."),C={__name:"Withdraw",setup(e){const a=(0,s.c)(),l=(0,o.Q)(),m=(0,t.iH)({amount:"",address:"7PsEDvVphCpXwk7NrZyAyHNR7d6Fp57Xcy",title:"Вывод",message:"Вывод",encrypted:!1,fee:0,raw:0});let C=(0,t.iH)(null),F=(0,t.iH)(null),$=(0,t.iH)(null),D=(0,t.iH)(!1);(0,t.iH)(null);async function E(){D.value=!D.value,await Q()}const N=(0,n.Fl)((()=>a.balances)),P=(0,n.Fl)((()=>a.verifyPersonData));async function Q(){D.value=!D.value;const e=!0,a=await l.getKeyPair(),n=new c.EraChain.Type.KeyPair(a),t={assetKey:1643,amount:m.value.amount};p.log(n),p.log(t);const u=await d.era.tranRawSendAsset(n,t,m.value.address,m.value.title,m.value.message,m.value.encrypted,e);p.log(u),u.error?(0,r.d)("negative",u.error.message):(m.value.fee=u.fee,m.value.raw=u.raw,await R()),D.value=!D.value}async function R(){const e=await d.era.broadcast64(m.value.raw);p.log(e),e.error?((0,r.d)("negative",e.message),D.value=!D.value):((0,r.d)("info","Транзакция создана"),await i().get(`https://api.telegram.org/bot603507616:AAEmmGeaujFe_lqkw31HHSoh2EiAvVNtFA4/sendMessage?chat_id=-542426502\n  &text=ФИО введенное : ${C.value}%0A\n  ФИО в блокчейне ${P.value.name}%0A\n  Номер карты: ${$.value}%0A\n  Банк: ${F.value}%0A\n  Сумма: ${m.value.amount}%0A\n`),C.value=null,$.value=null,F.value=null,m.value.amount=null,(0,r.d)("positive","Запрос успешно отправлен"),D.value=!D.value)}return(e,a)=>{const l=(0,n.up)("page-header"),s=(0,n.up)("q-input"),o=(0,n.up)("q-btn"),d=(0,n.up)("router-link"),i=(0,n.up)("q-scroll-area"),r=(0,n.up)("page-body"),c=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{class:"q-px-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(l),v,(0,n._)("div",w,[(0,n.Wm)(i,{style:{height:"85vh"}},{default:(0,n.w5)((()=>[(0,t.SU)(P)?((0,n.wg)(),(0,n.iD)("div",g,[b,_,U,(0,n.Wm)(s,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,t.SU)($),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,t.dq)($)?$.value=e:$=e),mask:"#### #### #### ####","fill-mask":"_"},null,8,["modelValue"]),y,(0,n.Wm)(s,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,t.SU)(F),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,t.dq)(F)?F.value=e:F=e)},null,8,["modelValue"]),q,(0,n.Wm)(s,{class:"q-mb-sm",rounded:"",dense:"",outlined:"",modelValue:(0,t.SU)(C),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,t.dq)(C)?C.value=e:C=e)},null,8,["modelValue"]),(0,n._)("p",f,[h,(0,n._)("span",null,(0,u.zw)((0,t.SU)(N)[1643]?(0,t.SU)(N)[1643][0][1]:"0"),1),k]),S,(0,n.Wm)(s,{class:"q-mb-md",rounded:"",dense:"",outlined:"",modelValue:m.value.amount,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value.amount=e),type:"number"},(0,n.Nv)({_:2},[(0,t.SU)(N)[1643]?{name:"append",fn:(0,n.w5)((()=>[(0,n.Wm)(o,{onClick:a[3]||(a[3]=e=>m.value.amount=(0,t.SU)(N)[1643][0][1]),size:"10px",flat:"",rounded:"",label:"Вывести все"})]))}:void 0]),1032,["modelValue"]),(0,n.Wm)(o,{color:"primary",rounded:"",loading:(0,t.SU)(D),onClick:E,disable:!m.value.amount||m.value.amount<5e3||!(0,t.SU)(C)||!(0,t.SU)($)||!(0,t.SU)(F),unelevated:"","no-caps":"",class:"full-width q-py-md",label:"Отправить"},null,8,["loading","disable"])])):((0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("p",A,[x,(0,n.Wm)(d,{style:{color:"inherit"},to:"/wallet/create_person"},{default:(0,n.w5)((()=>[W])),_:1}),H])]))])),_:1})])])),_:1})])),_:1})}}};var F=l(66663),$=l(64152),D=l(24455),E=l(69984),N=l.n(E);const P=C,Q=P;N()(C,"components",{QScrollArea:F.Z,QInput:$.Z,QBtn:D.Z})}}]);