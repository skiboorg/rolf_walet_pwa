(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[977],{42977:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>le});var a=t(59835),n=t(744),o=t.n(n);const i=(0,a._)("div",{class:"logo"},[(0,a._)("img",{src:o()})],-1),u={key:1},s=(0,a._)("p",{class:"text-center text-weight-bold"},"или",-1);function r(e,l,t,n,o,r){const c=(0,a.up)("Login"),p=(0,a.up)("btn"),d=(0,a.up)("Register"),g=(0,a.up)("page-body"),m=(0,a.up)("page");return(0,a.wg)(),(0,a.j4)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"q-px-lg"},{default:(0,a.w5)((()=>[i,n.loginActive?((0,a.wg)(),(0,a.j4)(c,{key:0,onSeedGood:n.setSeed},null,8,["onSeedGood"])):(0,a.kq)("",!0),!n.is_seed_good&&n.loginActive?((0,a.wg)(),(0,a.iD)("div",u,[s,(0,a.Wm)(p,{label:"Создать кошелек",outline:!1,onClick:l[0]||(l[0]=e=>n.loginActive=!1)})])):(0,a.kq)("",!0),n.loginActive?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:2,onOpenLogin:n.openLogin},null,8,["onOpenLogin"]))])),_:1})])),_:1})}t(46727);var c=t(61957),p=t(60499),d=t(13433),g=t(17779);const m=({seed:e,password:l})=>{g.log(e,l);const t={status:!0,seed:e},a=d.createCipher("aes192",l);return a.update(JSON.stringify(t),"utf8","hex")+a.final("hex")};var v=t(18910),b=t(96928),w=t(43463),y=t(17779);const _=(0,a._)("p",{class:"text-h6 text-bold text-center text-primary"},"Вход",-1),x=(0,a._)("p",{class:"q-mb-sm text-weight-medium"},"Введите ваш сид кошелька :",-1),k={key:0,class:"flex column justify-between"},h={class:""},f=(0,a._)("p",{class:"q-mb-sm text-weight-medium"},"Придумайте пароль для входа :",-1),q={__name:"Login",emits:["seedGood"],setup(e,{emit:l}){const t=(0,v.tv)(),n=(0,b.t)(),o=(0,w.s)(),i=(0,p.iH)(""),u=(0,p.iH)(""),s=(0,p.iH)(!0);function r(e){const t=/^[A-Za-z0-9]+$/;return!!t.test(e)&&(l("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}async function d(){o.toggleLoadingState();const e=m({seed:i.value,password:u.value});await n.login(i.value,e),y.log(e),o.toggleLoadingState(),await t.push({name:"wallet_index"})}return(e,l)=>{const t=(0,a.up)("q-separator"),n=(0,a.up)("q-input"),o=(0,a.up)("q-icon"),p=(0,a.up)("btn"),g=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[_,(0,a.Wm)(t,{spaced:"lg",color:"primary"}),x,(0,a.Wm)(g,{onSubmit:(0,c.iM)(d,["prevent"]),class:"q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{autofocus:"",outlined:"",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),color:"primary",label:"Введите сид",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>r(e)||"Введен не корректный сид"]},null,8,["modelValue","rules"]),r(i.value)?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",h,[f,(0,a.Wm)(n,{type:s.value?"password":"text",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),label:"Пароль*",outlined:"",color:"primary",class:"q-mb-lg","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле"]},{append:(0,a.w5)((()=>[(0,a.Wm)(o,{name:s.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[1]||(l[1]=e=>s.value=!s.value)},null,8,["name"])])),_:1},8,["type","modelValue","rules"])]),(0,a.Wm)(p,{label:"Продолжить",type:"submit",outline:!1})])):(0,a.kq)("",!0)])),_:1},8,["onSubmit"])],64)}}};var H=t(50926),S=t(8326),W=t(24455),C=t(80113),L=t(22857),V=t(69984),Z=t.n(V);const Q=q,D=Q;Z()(q,"components",{QSeparator:H.Z,QForm:S.Z,QBtn:W.Z,QInput:C.Z,QIcon:L.Z});var U=t(86970),A=t(99407),j=t(87270);const I=(0,a._)("p",{class:"text-h6 text-bold text-center text-primary"},"Регистрация",-1),T={key:0,class:""},z=(0,a._)("p",{class:"text-weight-bold text-center text-negative"},"Убедитесь, что вы со всем согласны:",-1),G=["innerHTML"],R=(0,a._)("p",null,[(0,a._)("a",{target:"_blank",href:"https://wallet.rupay.pro/rupay_user_agreement.pdf"},"Пользовательское соглашение")],-1),Y={key:1,class:""},F=(0,a._)("p",null,"Придумайте пароль для входа в веб-клиент:",-1),M={key:2,class:""},O=(0,a._)("p",null,"Ваш сид:",-1),B={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},P=(0,a._)("p",{class:"text-caption text-negative bg-yellow-3 q-pa-md text-weight-medium"}," Скопируйте или запишите ваш сид (секретный ключ) и сохраните его в максимально защищенном месте. Ни в коем случае не делитесь и никому не сообщайте ваш сид (секретный ключ)!!! ",-1),E={__name:"Register",emits:["openLogin"],setup(e,{emit:l}){const t=(0,b.t)(),n=(0,v.tv)(),o=(0,p.iH)(1),i=(0,p.iH)(""),u=(0,p.iH)(!0),s=(0,p.iH)(!1),r=(0,p.iH)(!1);let c=(0,p.iH)(null);const d=(0,p.iH)([{agree:!1,text:" Я согласен с тем, что доступ к сиду и ключам, имеется только у меня.\n     При утере сида, доступ к счетам  будет <strong>невозможно</strong> восстановить "},{agree:!1,text:" Я согласен с тем, что <strong>при передаче сида</strong>  третьим лицам,\n    я могу <strong>лишиться всех средств</strong> находящихся на счетах "},{agree:!1,text:"Я <strong>прочитал и согласен</strong> с пользовательским соглашением об общих условиях использования мобильного платежного приложения «RUPAY» "}]),g=(0,a.Fl)((()=>d.value[0].agree&&d.value[1].agree&&d.value[2].agree));function w(){l("openLogin")}async function y(){s.value=!s.value,c.value=await A.EraChain.Crypt.generateSeed(),s.value=!s.value,o.value=3}async function _(){s.value=!s.value;const e=m({seed:c.value,password:i.value});await t.login(c.value,e),await n.push({name:"wallet_index"}),s.value=!s.value}async function x(){await(0,j.Q)(c.value,"positive","Сид скопирован"),r.value=!0}return(e,l)=>{const t=(0,a.up)("q-separator"),n=(0,a.up)("q-toggle"),m=(0,a.up)("btn"),v=(0,a.up)("q-icon"),b=(0,a.up)("q-input"),k=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)(a.HY,null,[I,(0,a.Wm)(t,{spaced:"lg",color:"primary"}),1===o.value?((0,a.wg)(),(0,a.iD)("div",T,[z,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.value,((e,l)=>((0,a.wg)(),(0,a.j4)(n,{modelValue:d.value[l].agree,"onUpdate:modelValue":e=>d.value[l].agree=e,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,a.w5)((()=>[(0,a._)("p",{class:"no-margin",innerHTML:e.text},null,8,G)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),R,(0,p.SU)(g)?((0,a.wg)(),(0,a.j4)(m,{key:0,label:"Продолжить",onClick:l[0]||(l[0]=e=>o.value=2),type:"submit",outline:!1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0),2===o.value?((0,a.wg)(),(0,a.iD)("div",Y,[F,(0,a.Wm)(b,{type:u.value?"password":"text",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),autofocus:"",label:"Пароль*",outlined:"",color:"primary",class:"q-mb-sm","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Это обязательное поле",e=>e&&e.length>=8||"Минимум 8 символов"]},{append:(0,a.w5)((()=>[(0,a.Wm)(v,{name:u.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:l[1]||(l[1]=e=>u.value=!u.value)},null,8,["name"])])),_:1},8,["type","modelValue","rules"]),(0,a.Wm)(m,{label:"Продолжить",loading:s.value,disabled:!i.value||i.value.length<=7,onClick:y,type:"submit",outline:!1},null,8,["loading","disabled"]),(0,a._)("div",{class:"text-center q-mt-md"},[(0,a._)("p",{class:"text-caption no-margin",onClick:w},"У меня есть сид")])])):(0,a.kq)("",!0),3===o.value?((0,a.wg)(),(0,a.iD)("div",M,[O,(0,a._)("p",B,(0,U.zw)((0,p.SU)(c)),1),(0,a.Wm)(k,{onClick:x,"no-caps":"",label:"Скопировать сид",dense:"",unelevated:"",color:"primary",class:"full-width q-mb-md"}),P,(0,a.Wm)(m,{label:r.value?"Продолжить":"Для продолжения скопируйте сид",disabled:!r.value,is_loading:s.value,onClick:_,type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,a.kq)("",!0)],64)}}};var J=t(80592);const K=E,N=K;Z()(E,"components",{QSeparator:H.Z,QToggle:J.Z,QInput:C.Z,QIcon:L.Z,QBtn:W.Z});const $={name:"IndexPage",components:{Register:N,Login:D},preFetch({redirect:e,router:l}){localStorage.getItem("seed")},setup(){const e=(0,p.iH)(!0),l=(0,p.iH)(!1);function t(e){l.value=e.val}function a(t){l.value=!1,e.value=!0}return{loginActive:e,is_seed_good:l,setSeed:t,openLogin:a}}};var X=t(11639);const ee=(0,X.Z)($,[["render",r]]),le=ee},744:(e,l,t)=>{e.exports=t.p+"img/logo.1c141a22.png"}}]);