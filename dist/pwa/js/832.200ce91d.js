(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[832],{75008:(e,t,a)=>{"use strict";a.d(t,{C:()=>s,d:()=>o});var l=a(13433),n=a(17779);const o=({seed:e,password:t})=>{n.log(e,t);const a={status:!0,seed:e},o=l.createCipher("aes192",t);return o.update(JSON.stringify(a),"utf8","hex")+o.final("hex")},s=({hash:e,password:t})=>{n.log(e),n.log(t);try{const a=l.createDecipher("aes192",t),n=a.update(e,"hex","utf8")+a.final("utf8"),o=JSON.parse(n);return!!o.status&&o.seed}catch(a){return n.log(a),!1}}},53832:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var l=a(59835),n=a(86970),o=a(744),s=a.n(o);const i=(0,l._)("img",{src:s()},null,-1),u=[i],c={key:1},r=(0,l._)("p",{class:"text-center text-weight-bold"},"или",-1);function g(e,t,a,o,s,i){const g=(0,l.up)("Login"),d=(0,l.up)("btn"),p=(0,l.up)("Register"),v=(0,l.up)("page-body"),m=(0,l.up)("page");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"q-px-lg"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,n.C_)(["logo",{"logo-small":o.is_seed_good||o.hash}])},u,2),o.loginActive?((0,l.wg)(),(0,l.j4)(g,{key:0,onSeedGood:o.setSeed},null,8,["onSeedGood"])):(0,l.kq)("",!0),o.is_seed_good||!o.loginActive||o.hash?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",c,[r,(0,l.Wm)(d,{label:"Создать кошелек",outline:!1,onClick:t[0]||(t[0]=e=>o.loginActive=!1)})])),o.loginActive?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(p,{key:2,onOpenLogin:o.openLogin},null,8,["onOpenLogin"]))])),_:1})])),_:1})}a(46727);var d=a(60499),p=a(87270),v=a(75008),m=a(18910),w=a(96928),h=a(43463),_=a(17779);const y=(0,l._)("p",{class:"text-h6 text-bold text-center text-primary"},"Вход",-1),x={key:0},b=(0,l._)("p",{class:"q-mb-sm text-weight-medium"},"Введите ваш сид кошелька:",-1),k={key:0,class:"flex column justify-between"},f={class:""},q={key:1,class:"pincode-tab"},H={__name:"Login",emits:["seedGood"],setup(e,{emit:t}){const a=(0,m.tv)(),n=(0,w.t)(),o=(0,h.s)(),s=(0,d.iH)(""),i=(0,d.iH)(""),u=((0,d.iH)(!0),localStorage.getItem("hash"));async function c(e){_.log(u),_.log(e);const t=(0,v.C)({hash:u,password:e});_.log(t),t?(s.value=t,await r()):(0,p.d)("negative","Неверный пинкод")}async function r(){o.toggleLoadingState();const e=(0,v.d)({seed:s.value,password:i.value});await n.login(s.value,e),_.log(e),o.toggleLoadingState(),await a.push({name:"wallet_index"})}async function g(e){i.value=e,await r()}async function H(){await n.logout()}function S(e){const a=/^[A-Za-z0-9]+$/;return!!a.test(e)&&(t("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}return(e,t)=>{const a=(0,l.up)("q-separator"),n=(0,l.up)("q-input"),o=(0,l.up)("pin-code"),i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[y,(0,l.Wm)(a,{spaced:"lg",color:"primary"}),(0,d.SU)(u)?((0,l.wg)(),(0,l.iD)("div",q,[(0,l.Wm)(o,{showDigits:!1,onPincode_ready:c}),(0,l.Wm)(i,{"no-caps":"",outline:"",class:"full-width q-mt-md",onClick:H,size:"14px",dense:"",color:"negative",label:"Я забыл пин-код. Сбросить все данные"})])):((0,l.wg)(),(0,l.iD)("div",x,[b,(0,l.Wm)(n,{autofocus:"",outlined:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),color:"primary",label:"Введите сид",rules:[e=>e&&e.length>0||"Это обязательное поле",e=>S(e)||"Введен не корректный сид"]},null,8,["modelValue","rules"]),S(s.value)?((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",f,[(0,l.Wm)(o,{showDigits:!0,onPincode_ready:g})])])):(0,l.kq)("",!0)]))],64)}}};var S=a(50926),C=a(24455),D=a(64152),L=a(69984),W=a.n(L);const Z=H,A=Z;W()(H,"components",{QSeparator:S.Z,QBtn:C.Z,QInput:D.Z});var Q=a(99407);const U=(0,l._)("p",{class:"text-h6 text-bold text-center text-primary"},"Регистрация",-1),V={key:0,class:""},j=(0,l._)("p",{class:"text-weight-bold text-center text-negative"},"Убедитесь, что вы со всем согласны:",-1),I=["innerHTML"],P=(0,l._)("p",null,[(0,l._)("a",{target:"_blank",href:"https://wallet.rupay.pro/rupay_user_agreement.pdf"},"Пользовательское соглашение")],-1),T={key:1,class:""},G={key:2,class:""},O=(0,l._)("p",null,"Ваш сид:",-1),R={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},Y=(0,l._)("p",{class:"text-caption text-negative bg-yellow-3 q-pa-md text-weight-medium"}," Скопируйте или запишите ваш сид (секретный ключ) и сохраните его в максимально защищенном месте. Ни в коем случае не делитесь и никому не сообщайте ваш сид (секретный ключ)!!! ",-1),z={__name:"Register",emits:["openLogin"],setup(e,{emit:t}){const a=(0,w.t)(),o=(0,m.tv)(),s=(0,d.iH)(1),i=(0,d.iH)(""),u=((0,d.iH)(!0),(0,d.iH)(!1)),c=(0,d.iH)(!1);let r=(0,d.iH)(null);const g=(0,d.iH)([{agree:!1,text:" Я согласен с тем, что доступ к сиду и ключам, имеется только у меня.\n     При утере сида, доступ к счетам  будет <strong>невозможно</strong> восстановить "},{agree:!1,text:" Я согласен с тем, что <strong>при передаче сида</strong>  третьим лицам,\n    я могу <strong>лишиться всех средств</strong> находящихся на счетах "},{agree:!1,text:"Я <strong>прочитал и согласен</strong> с пользовательским соглашением об общих условиях использования мобильного платежного приложения «RUPAY» "}]),h=(0,l.Fl)((()=>g.value[0].agree&&g.value[1].agree&&g.value[2].agree));function _(){t("openLogin")}async function y(e){i.value=e,await x()}async function x(){u.value=!u.value,r.value=await Q.EraChain.Crypt.generateSeed(),u.value=!u.value,s.value=3}async function b(){u.value=!u.value;const e=(0,v.d)({seed:r.value,password:i.value});await a.login(r.value,e),await o.push({name:"wallet_index"}),u.value=!u.value}async function k(){await(0,p.Q)(r.value,"positive","Сид скопирован"),c.value=!0}return(e,t)=>{const a=(0,l.up)("q-separator"),o=(0,l.up)("q-toggle"),i=(0,l.up)("btn"),p=(0,l.up)("pin-code"),v=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[U,(0,l.Wm)(a,{spaced:"lg",color:"primary"}),1===s.value?((0,l.wg)(),(0,l.iD)("div",V,[j,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.value,((e,t)=>((0,l.wg)(),(0,l.j4)(o,{modelValue:g.value[t].agree,"onUpdate:modelValue":e=>g.value[t].agree=e,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,l.w5)((()=>[(0,l._)("p",{class:"no-margin",innerHTML:e.text},null,8,I)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),P,(0,d.SU)(h)?((0,l.wg)(),(0,l.j4)(i,{key:0,label:"Продолжить",onClick:t[0]||(t[0]=e=>s.value=2),type:"submit",outline:!1})):(0,l.kq)("",!0)])):(0,l.kq)("",!0),2===s.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l.Wm)(p,{showDigits:!0,onPincode_ready:y}),(0,l._)("div",{class:"text-center q-mt-md"},[(0,l._)("p",{class:"text-caption no-margin",onClick:_},"У меня есть сид")])])):(0,l.kq)("",!0),3===s.value?((0,l.wg)(),(0,l.iD)("div",G,[O,(0,l._)("p",R,(0,n.zw)((0,d.SU)(r)),1),(0,l.Wm)(v,{onClick:k,"no-caps":"",label:"Скопировать сид",dense:"",unelevated:"",color:"primary",class:"full-width q-mb-md"}),Y,(0,l.Wm)(i,{label:c.value?"Продолжить":"Для продолжения скопируйте сид",disabled:!c.value,is_loading:u.value,onClick:b,type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,l.kq)("",!0)],64)}}};var B=a(17137);const F=z,J=F;W()(z,"components",{QSeparator:S.Z,QToggle:B.Z,QBtn:C.Z});const M={name:"IndexPage",components:{Register:J,Login:A},preFetch({redirect:e,router:t}){localStorage.getItem("seed")},setup(){const e=(0,d.iH)(!0),t=(0,d.iH)(!1),a=localStorage.getItem("hash");function l(e){t.value=e.val}function n(a){t.value=!1,e.value=!0}return{loginActive:e,is_seed_good:t,hash:a,setSeed:l,openLogin:n}}};var N=a(11639);const E=(0,N.Z)(M,[["render",g]]),K=E},744:(e,t,a)=>{e.exports=a.p+"img/logo.1c141a22.png"}}]);