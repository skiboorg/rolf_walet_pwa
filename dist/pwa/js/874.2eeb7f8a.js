"use strict";(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[874],{70874:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Z});var u=a(59835),t=a(60499),s=a(86970),o=a(23459),n=a(46190),p=a(31655),d=a(91569),m=a(87270),i=a(18910),r=a(17779);const c=(0,u._)("div",{class:"",style:{height:"50px"}},null,-1),_=["src"],v={key:0},b={key:1},y={class:"text-caption"},w={key:0,class:"text-caption text-negative"},g={key:2},f={__name:"NewBuyOffer",setup(e){const l=(0,o.Q)(),f=(0,n.c)(),q=(0,t.iH)(null),V=(0,i.tv)();let k=a(24409);const h=(0,p.T)(),W=(0,t.iH)(null),$=(0,t.iH)(null),F=(0,t.iH)(null),U=(0,t.iH)(null),x=(0,t.iH)(null),Q=((0,u.Fl)((()=>f.addresses[f.currentAddressIdx].address)),(0,u.Fl)((()=>h.user))),Z=(0,u.Fl)((()=>k.orderBy(l.assets,["id"])));(0,u.Fl)((()=>f.balances));async function H(){r.log(W.value);const e=await d.h.post("/api/p2p/add_offer",{is_sell:!1,asset_key:W.value.key,wallet:Q.value.wallet,amount:$.value,min_amount:F.value,payment_types:q.value,course:U.value,rules:x.value});e.data.success?(0,m.d$)("positive",e.data.message):(0,m.d$)("negative",e.data.message),await h.get_own_offers(),V.push({name:"p2p_index"})}return(e,l)=>{const a=(0,u.up)("page-header"),o=(0,u.up)("q-avatar"),n=(0,u.up)("q-item-section"),p=(0,u.up)("q-item-label"),d=(0,u.up)("q-item"),m=(0,u.up)("q-select"),i=(0,u.up)("q-input"),r=(0,u.up)("q-btn"),f=(0,u.up)("page-body"),V=(0,u.up)("page");return(0,u.wg)(),(0,u.j4)(V,null,{default:(0,u.w5)((()=>[(0,u.Wm)(f,{class:"q-pa-md"},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{route_name:"p2p_index"}),c,(0,u.Wm)(m,{outlined:"",rounded:"",options:(0,t.SU)(Z).filter((e=>e.is_in_p2p)),modelValue:W.value,"onUpdate:modelValue":l[0]||(l[0]=e=>W.value=e),"option-label":"name",class:"q-mb-md",behavior:"dialog",label:e.$t("p2p_select_asset_for_buy")},{option:(0,u.w5)((e=>[(0,u.Wm)(d,(0,s.vs)((0,u.F4)(e.itemProps)),{default:(0,u.w5)((()=>[(0,u.Wm)(n,{avatar:""},{default:(0,u.w5)((()=>[(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[(0,u._)("img",{src:e.opt.icon},null,8,_)])),_:2},1024)])),_:2},1024),(0,u.Wm)(n,null,{default:(0,u.w5)((()=>[(0,u.Wm)(p,{class:"text-bold"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,s.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","modelValue","label"]),W.value?((0,u.wg)(),(0,u.iD)("div",v,[(0,u.Wm)(m,{outlined:"",rounded:"",options:(0,t.SU)(Q).payment_types,modelValue:q.value,"onUpdate:modelValue":l[1]||(l[1]=e=>q.value=e),"use-chips":"",class:"q-mb-md",behavior:"dialog",multiple:"",label:e.$t("p2p_select_payment_system")},null,8,["options","modelValue","label"])])):(0,u.kq)("",!0),q.value&&q.value.length>0?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:$.value,"onUpdate:modelValue":l[2]||(l[2]=e=>$.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_volume")},null,8,["modelValue","label"]),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:F.value,"onUpdate:modelValue":l[3]||(l[3]=e=>F.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_volume_min")},null,8,["modelValue","label"]),(0,u._)("p",y,(0,s.zw)(e.$t("buy_amomunt_cource"))+": "+(0,s.zw)(W.value.course),1),parseFloat(W.value.p2p_min_buy_price)>0?((0,u.wg)(),(0,u.iD)("p",w,(0,s.zw)(e.$t("buy_min_cource"))+": "+(0,s.zw)(W.value.p2p_min_buy_price),1)):(0,u.kq)("",!0),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:U.value,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value=e),class:"q-mb-md",type:"number",label:e.$t("p2p_select_course")},null,8,["modelValue","label"]),(0,u.Wm)(i,{outlined:"",rounded:"",modelValue:x.value,"onUpdate:modelValue":l[5]||(l[5]=e=>x.value=e),class:"q-mb-md",type:"textarea",label:e.$t("p2p_select_rules")},null,8,["modelValue","label"])])):(0,u.kq)("",!0),$.value&&F.value&&U.value?((0,u.wg)(),(0,u.iD)("div",g,[(0,u.Wm)(r,{dense:"",class:"full-width q-py-md",color:"positive","no-caps":"",unelevated:"",disable:!$.value||parseFloat(F.value)>parseFloat($.value)||parseFloat(U.value)<parseFloat(W.value.p2p_min_buy_price),onClick:H,rounded:"",label:`${e.$t("p2p_create_offer")} ${$.value*U.value} RUB`},null,8,["disable","label"])])):(0,u.kq)("",!0)])),_:1})])),_:1})}}};var q=a(57786),V=a(490),k=a(76749),h=a(61357),W=a(33115),$=a(13119),F=a(24455),U=a(69984),x=a.n(U);const Q=f,Z=Q;x()(f,"components",{QSelect:q.Z,QItem:V.Z,QItemSection:k.Z,QAvatar:h.Z,QItemLabel:W.Z,QInput:$.Z,QBtn:F.Z})}}]);