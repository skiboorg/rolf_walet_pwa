"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[628],{76628:(e,a,l)=>{l.r(a),l.d(a,{default:()=>G});var t=l(59835),s=l(86970),u=l(60499),n=l(91569),o=l(18910),p=l(46190),d=l(31655),r=l(87270);const i=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),v={class:"q-mb-sm"},m={class:"text-bold"},_=(0,t.Uk)(", минимальный объем "),c={class:"text-bold"},w={class:"text-bold"},b=(0,t._)("br",null,null,-1),y=(0,t.Uk)(" Разместил пользователь "),f=["href"],x={key:0,class:"text-positive text-bold"},g={key:1,class:"text-negative text-bold"},k=(0,t.Uk)(", сделок проведено "),h={class:"text-bold"},U=(0,t._)("br",null,null,-1),z=(0,t._)("span",{class:"text-bold"},"Условия сделки:",-1),F=(0,t._)("br",null,null,-1),q=(0,t._)("span",{class:"text-bold"},null,-1),S=(0,t.Uk)("Введите объем сделки минимум: "),W={class:"text-bold"},V=(0,t.Uk)(", максимум: "),C={class:"text-bold"},H=(0,t._)("p",null,"Выберите платежную систему",-1),Q={key:0,class:"text-negative text-bold"},Z=(0,t.Uk)(" Y вас нет выбранной платежной системы. Добавьте ее "),$=(0,t.Uk)("тут"),D=(0,t.Uk)(" или выберите другую."),T={__name:"Offer",setup(e){const a=(0,o.yj)(),l=(0,o.tv)(),T=(0,p.c)(),j=(0,d.T)(),I=(0,u.iH)({asset:{name:""},user:{wallet:"",total_trades:0}}),A=(0,u.iH)(null),B=(0,u.iH)(null),O=(0,u.iH)(!1),Y=(0,t.Fl)((()=>j.user)),E=(0,t.Fl)((()=>{if(B.value){let e=B.value.payment_type.id;return Y.value.payment_types.filter((a=>a.payment_type.id===e))}return!1})),G=((0,t.Fl)((()=>{if(B.value){let e=B.value.payment_type.id;return G.value?Y.value.payment_types.filter((a=>a.payment_type.id===e)):I.value.user.payment_types.filter((a=>a.payment_type.id===e))}})),(0,t.Fl)((()=>I.value.is_sell?I.value.user.wallet===Y.value.wallet:I.value.user.wallet!==Y.value.wallet))),J=(0,t.Fl)((()=>T.addresses[T.currentAddressIdx].address)),K=(0,t.Fl)((()=>parseFloat(A.value)>=I.value.min_amount&&parseFloat(A.value)<=I.value.amount&&B.value&&E.value.length>0)),L=(0,t.Fl)((()=>{if(A.value)return parseFloat(A.value)*I.value.course}));async function M(){O.value=!O.value;const e=await n.h.post("/api/p2p/create_trade",{offer_id:I.value.id,amount:A.value,asset_amount_without_commission:parseFloat(A.value-.01*A.value).toFixed(5),payment_type:B.value.id,opponent:J.value});e.data.success?(0,r.d)("positive",e.data.message):(0,r.d)("negative",e.data.message),O.value=!O.value,await j.get_own_trades(),l.push({name:"p2p_index"})}return(0,t.wF)((async()=>{let e=a.params.offer_id;const l=await n.h.get(`/api/p2p/offer?id=${e}`);I.value=l.data})),(e,a)=>{const l=(0,t.up)("page-header"),n=(0,t.up)("q-separator"),o=(0,t.up)("q-btn"),p=(0,t.up)("q-input"),d=(0,t.up)("q-select"),r=(0,t.up)("router-link"),T=(0,t.up)("page-body"),j=(0,t.up)("page");return(0,t.wg)(),(0,t.j4)(j,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{route_name:"p2p_index"}),i,(0,t.Uk)(" is_seller "+(0,s.zw)((0,u.SU)(G))+" ",1),(0,t._)("p",v,[(0,t.Uk)(" Оффер #"+(0,s.zw)(I.value.id)+" на "+(0,s.zw)(I.value.is_sell?"продажу":"покупку")+" ",1),(0,t._)("span",m,(0,s.zw)(I.value.amount)+" "+(0,s.zw)(I.value.asset.name),1),_,(0,t._)("span",c,(0,s.zw)(I.value.min_amount)+" "+(0,s.zw)(I.value.asset.name),1),(0,t.Uk)(", курс "+(0,s.zw)(I.value.is_sell?"покупки":"продажи")+" ",1),(0,t._)("span",w,(0,s.zw)(I.value.course)+" руб.",1),b,y,(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${I.value.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold",target:"_blank"},(0,s.zw)(I.value.user.fio),9,f),I.value.user.is_online?((0,t.wg)(),(0,t.iD)("span",x," в сети")):((0,t.wg)(),(0,t.iD)("span",g," не в сети")),k,(0,t._)("span",h,(0,s.zw)(I.value.user.total_trades),1),U,z,F,(0,t.Uk)((0,s.zw)(I.value.rules),1)]),(0,t.Wm)(n,{spaced:"md"}),q,(0,t._)("p",null,[S,(0,t._)("span",W,(0,s.zw)(I.value.min_amount)+" "+(0,s.zw)(I.value.asset.name),1),V,(0,t._)("span",C,(0,s.zw)(I.value.amount)+" "+(0,s.zw)(I.value.asset.name),1)]),(0,t.Wm)(p,{outlined:"",rounded:"",modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),type:"number",label:`Объем сделки в ${I.value.asset.name}`,class:"q-mb-md"},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{onClick:a[0]||(a[0]=e=>A.value=I.value.amount),size:"10px",unelevated:"",color:"primary","no-caps":"",rounded:"",label:"Максимум"})])),_:1},8,["modelValue","label"]),H,(0,t.Wm)(d,{outlined:"",rounded:"",modelValue:B.value,"onUpdate:modelValue":a[2]||(a[2]=e=>B.value=e),options:I.value.payment_types,class:"q-mb-md",label:"Платежная система",behavior:"menu"},null,8,["modelValue","options"]),B.value&&!(0,u.SU)(E).length>0?((0,t.wg)(),(0,t.iD)("p",Q,[Z,(0,t.Wm)(r,{to:{name:"p2p_user"}},{default:(0,t.w5)((()=>[$])),_:1}),D])):(0,t.kq)("",!0),(0,t.Wm)(o,{disable:!(0,u.SU)(K),label:(0,u.SU)(K)?`Создать сделку на ${(0,u.SU)(L)} руб`:"Заполните все поля",class:"full-width q-py-md",color:(0,u.SU)(K)?"positive":"negative","no-caps":"",onClick:M,loading:O.value,rounded:"",unelevated:""},null,8,["disable","label","color","loading"])])),_:1})])),_:1})}}};var j=l(50926),I=l(13119),A=l(24455),B=l(18401),O=l(69984),Y=l.n(O);const E=T,G=E;Y()(T,"components",{QSeparator:j.Z,QInput:I.Z,QBtn:A.Z,QSelect:B.Z})}}]);