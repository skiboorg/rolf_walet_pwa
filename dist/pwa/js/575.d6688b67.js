"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[575],{25575:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Za});var t=l(59835),s=l(60499),n=l(86970),o=l(91569),r=l(18910),i=l(23459),u=l(98030),d=l(31655),p=l(87270),c=l(17779);const _=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),m={key:0,class:"text-bold text-center text-primary"},w={key:1},f={key:2},g={key:0},U={key:0,class:"q-mb-md"},b=(0,t._)("p",{class:"text-white caption text-justify"},[(0,t.Uk)("Нажмите эту кпопку при возникновении спорной ситуации. "),(0,t._)("span",{class:"text-bold"},"После нажатия, все действия со сделкой блокируются")],-1),x={key:1},v=(0,t.Uk)("Сделка "),y={class:"text-bold"},h=(0,t.Uk)(" по офферу "),k={class:"text-bold"},S=(0,t.Uk)("  "),z={key:0},D={key:1},q={class:"text-bold"},W=(0,t.Uk)(" по курсу "),C={class:"text-bold"},$=(0,t.Uk)(" на сумму "),H={class:"text-bold"},Q=(0,t._)("br",null,null,-1),V=(0,t._)("br",null,null,-1),Z=(0,t.Uk)(" Платежная система: "),j={class:"text-bold"},A=(0,t.Uk)(", реквизиты: "),F={class:"text-bold"},I=(0,t._)("br",null,null,-1),T=(0,t._)("br",null,null,-1),K=(0,t._)("br",null,null,-1),P={key:2},J=["href"],N=(0,t._)("br",null,null,-1),L={key:3},M=["href"],O=(0,t._)("br",null,null,-1),B={key:0},E={key:0},G={key:1},R={key:0},X=(0,t.Uk)("После нажатия на кнопку согласия, с вашего адреса на адрес гаранта будет снята сумма "),Y={class:"text-bold"},ee=(0,t.Uk)('. В случае возникновения спорных ситуаций в ходе проведения сделки, нажмите на кнопку "Нужна помощь"'),ae={key:1},le={key:2},te=["href"],se={class:"text-bold"},ne={key:0},oe=(0,t._)("p",{class:"text-caption text-bold text-negative text-justify"},"Добавьте любое подтверждение факта оплаты в поле ниже и подтвердите получение оплаты",-1),re={key:3},ie={key:0},ue=["href"],de={key:4},pe=["href"],ce={class:"text-bold"},_e={key:1},me=(0,t._)("p",{class:"text-negative text-center items-center"},"Ожидайте подкючения администратора. Сообщения в чате выделены красным цветом",-1),we=(0,t.Uk)("Сделка "),fe={class:"text-bold"},ge=(0,t.Uk)(" по офферу "),Ue={class:"text-bold"},be=(0,t.Uk)("  "),xe={key:0},ve={key:1},ye={class:"text-bold"},he=(0,t.Uk)(" по курсу "),ke={class:"text-bold"},Se=(0,t.Uk)(" на сумму "),ze={class:"text-bold"},De=(0,t._)("br",null,null,-1),qe=(0,t._)("br",null,null,-1),We=(0,t.Uk)(" Платежная система: "),Ce={class:"text-bold"},$e=(0,t.Uk)(", реквизиты: "),He={class:"text-bold"},Qe=(0,t._)("br",null,null,-1),Ve=(0,t._)("br",null,null,-1),Ze=(0,t._)("br",null,null,-1),je={key:2},Ae=["href"],Fe=(0,t._)("br",null,null,-1),Ie={key:3},Te=["href"],Ke=(0,t._)("br",null,null,-1),Pe={key:2},Je=(0,t._)("br",null,null,-1),Ne=(0,t._)("br",null,null,-1),Le=(0,t._)("br",null,null,-1),Me=(0,t._)("br",null,null,-1),Oe=(0,t._)("br",null,null,-1),Be=(0,t._)("br",null,null,-1),Ee=(0,t._)("br",null,null,-1),Ge=(0,t.Uk)(" Создатель оффера: "),Re=["href"],Xe=(0,t._)("br",null,null,-1),Ye=(0,t.Uk)(),ea=(0,t._)("br",null,null,-1),aa=(0,t.Uk)(" Создатель сделки: "),la=["href"],ta=(0,t._)("br",null,null,-1),sa={key:0},na=["href"],oa={class:"text-bold"},ra={key:1},ia=["href"],ua={class:"text-bold"},da={key:2},pa=["href"],ca={key:3},_a=["href"],ma={class:"text-bold"},wa={class:"full-height"},fa=(0,t._)("br",null,null,-1),ga={key:0},Ua=["href"],ba={class:"flex items-center"},xa={__name:"Trade",setup(e){const a=(0,r.yj)(),xa=(0,r.tv)(),{EraChain:va}=l(99407),ya=(0,i.Q)(),ha=(0,d.T)(),ka=(0,s.iH)(null),Sa=(0,s.iH)(null),za=(0,s.iH)(null),Da=(0,s.iH)(null),qa=(0,s.iH)(null),Wa=(0,s.iH)(null),Ca=(0,s.iH)(null),$a=(0,s.iH)(!1),Ha=(0,s.iH)(!1),Qa=(0,s.iH)([]),Va=((0,s.iH)(0),(0,s.iH)(3e5)),Za="7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP",ja=(0,t.Fl)((()=>ha.user)),Aa=(0,t.Fl)((()=>ha.trade)),Fa=(0,t.Fl)((()=>Aa.value.offer.is_sell?Aa.value.offer.user.wallet===ja.value.wallet:Aa.value.opponent.wallet===ja.value.wallet));async function Ia(e){let a=null;"money_receive"===e&&(a=Aa.value.offer.user.wallet!==ja.value.wallet?Aa.value.offer.user.wallet:Aa.value.opponent.wallet),c.log(qa.value),$a.value=!$a.value;let l=new FormData;l.set("action",e),qa.value&&l.set("file",qa.value),l.set("wallet",a),l.set("uid",Aa.value.UID),c.log(l);const t=await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/trade_action",data:l});t.data.success?(0,p.d)("positive",t.data.message):(0,p.d)("negative",t.data.message),$a.value=!$a.value,"delete"===e&&xa.push({name:"p2p_index"})}async function Ta(){ka.value=new WebSocket(`wss://xn--k1affs.xn--p1ai/ws/trade_chat/${Aa.value.UID}`);const e=await o.h.get(`/api/p2p/get_trade_chat?trade_uid=${Aa.value.UID}`);c.log(e.data),Qa.value=e.data.messages,ka.value.onmessage=async e=>{let a=JSON.parse(e.data)["message"];c.log("DATA",a.user.wallet);let l={id:a.id,message:a.message,file:a.file?a.file:null,createdAt:a.createdAt,user:{wallet:a.user.wallet,is_p2p_admin:a.user.is_p2p_admin,fio:a.user.fio}};Qa.value.push(l),Pa()}}async function Ka(e){13===e.keyCode&&Da.value&&await Na()}function Pa(){Ha.value&&(Ca.value.setScrollPosition("vertical",Va.value,300),Va.value=20*Math.floor(300))}function Ja(){Pa()}async function Na(){$a.value=!$a.value;let e=new FormData;e.set("message",JSON.stringify(Da.value)),e.set("file",Wa.value),e.set("wallet",ja.value.wallet),e.set("trade_uid",Aa.value.UID),c.log(e);await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/add_message_in_trade_chat",data:e});Da.value=null,Wa.value=null,$a.value=!$a.value}async function La(){$a.value=!$a.value;const e=!0,a=await ya.getKeyPair(),l=new va.Type.KeyPair(a),t={assetKey:Aa.value.offer.asset.key,amount:Aa.value.asset_amount};c.log(l),c.log(t);const s=await u.era.tranRawSendAsset(l,t,Za,"Депонирование баланса",`Сделка ${Aa.value.id} по офферу ${Aa.value.offer.id}`,!1,e);c.log(s),s.error?(0,p.d)("negative",s.error.message):(Sa.value=s.fee,za.value=s.raw,await Ma()),$a.value=!$a.value}async function Ma(){const e=await u.era.broadcast64(za.value);if(c.log(e),e.error)(0,p.d)("negative",e.message);else{(0,p.d)("positive","Баланс задепонирован");await o.h.post("/api/p2p/trade_action",{action:"freeze_money",uid:Aa.value.UID,tx:e.signature,wallet:ja.value.wallet})}}return(0,t.wF)((async()=>{ha.current_trade_uid=a.params.uid,await ha.get_user(),c.log("wallet",ja.value),await ha.get_trade(),await Ta(),Aa.value.status.is_need_help&&(Ha.value=!0)})),(0,t.Jd)((async()=>{ka.value?ka.value.close():c.log("not connect")})),(e,a)=>{const l=(0,t.up)("page-header"),o=(0,t.up)("q-btn"),r=(0,t.up)("q-card-section"),i=(0,t.up)("q-card"),u=(0,t.up)("q-separator"),d=(0,t.up)("q-icon"),p=(0,t.up)("q-file"),c=(0,t.up)("q-chat-message"),xa=(0,t.up)("q-scroll-area"),va=(0,t.up)("q-input"),ya=(0,t.up)("q-dialog"),ha=(0,t.up)("page-body"),ka=(0,t.up)("page"),Sa=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(ka,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ha,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{route_name:"p2p_index"}),_,(0,s.SU)(Aa).can_delete?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("p",m," Отменить сделку можно "+(0,n.zw)(new Date((0,s.SU)(Aa).can_delete_time).toLocaleString()),1)),(0,s.SU)(Aa).status.is_default&&(0,s.SU)(Aa).can_delete?((0,t.wg)(),(0,t.iD)("div",w,[(0,t.Wm)(o,{rounded:"",class:"full-width q-mb-md","no-caps":"",unelevated:"",color:"negative",onClick:a[0]||(a[0]=e=>Ia("delete")),label:"Отменить сделку"})])):(0,t.kq)("",!0),(0,t.Wm)(i,{flat:"",class:(0,n.C_)(["text-bold text-center q-mb-md text-white",`bg-${(0,s.SU)(Aa).status.color}`])},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"Статус сделки: "+(0,n.zw)((0,s.SU)(Aa).status.label)+" ",1)])),_:1})])),_:1},8,["class"]),(0,s.SU)(Aa).status.is_declined?((0,t.wg)(),(0,t.iD)("div",ca,[(0,s.SU)(Aa).tx_send?((0,t.wg)(),(0,t.iD)("a",{key:0,class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,s.SU)(Aa).tx_return}&lang=en`,target:"_blank"},[(0,t._)("span",ma,"Транзакция возврата "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)],8,_a)):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.iD)("div",f,[(0,s.SU)(Aa).status.is_need_help?((0,t.wg)(),(0,t.iD)("div",_e,[me,(0,t._)("p",null,[we,(0,t._)("span",fe,"#"+(0,n.zw)((0,s.SU)(Aa).id),1),ge,(0,t._)("span",Ue,"#"+(0,n.zw)((0,s.SU)(Aa).offer.id),1),be,(0,s.SU)(Aa).offer.is_sell?((0,t.wg)(),(0,t.iD)("span",xe,(0,n.zw)((0,s.SU)(Aa).opponent.wallet===(0,s.SU)(ja).wallet?"покупка":"продажа"),1)):((0,t.wg)(),(0,t.iD)("span",ve,(0,n.zw)((0,s.SU)(Aa).opponent.wallet===(0,s.SU)(ja).wallet?"продажа":"покупка"),1)),(0,t._)("span",ye," "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1),he,(0,t._)("span",ke,(0,n.zw)((0,s.SU)(Aa).offer.course)+" руб",1),Se,(0,t._)("span",ze,(0,n.zw)((0,s.SU)(Aa).fiat_amount)+" руб",1),De,qe,We,(0,t._)("span",Ce,(0,n.zw)((0,s.SU)(Aa).payment_type.label),1),$e,(0,t._)("span",He,(0,n.zw)((0,s.SU)(Aa).payment_type.payment_info),1),Qe,Ve,(0,t._)("span",null,(0,n.zw)((0,s.SU)(Fa)?"Покупатель":"Продавец"),1),Ze,(0,s.SU)(Aa).offer.user.wallet!==(0,s.SU)(ja).wallet?((0,t.wg)(),(0,t.iD)("span",je,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).offer.user.fio),9,Ae),Fe,(0,t.Uk)(" Завершенных сделок "+(0,n.zw)((0,s.SU)(Aa).offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",Ie,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).opponent.fio),9,Te),Ke,(0,t.Uk)(" Завершенных сделок "+(0,n.zw)((0,s.SU)(Aa).opponent.total_trades),1)]))])])):((0,t.wg)(),(0,t.iD)("div",g,[(0,s.SU)(Aa).status.is_default||(0,s.SU)(Aa).status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",U,[(0,t.Wm)(i,{flat:"",class:"bg-red-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[b,(0,t.Wm)(o,{label:"Нужна помощь админа",loading:$a.value,onClick:a[1]||(a[1]=e=>Ia("need_help")),class:"full-width","no-caps":"",unelevated:"",color:"yellow-4","text-color":"dark",rounded:""},null,8,["loading"])])),_:1})])),_:1})])),(0,s.SU)(Aa).status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",x,[(0,t._)("p",null,[v,(0,t._)("span",y,"#"+(0,n.zw)((0,s.SU)(Aa).id),1),h,(0,t._)("span",k,"#"+(0,n.zw)((0,s.SU)(Aa).offer.id),1),S,(0,s.SU)(Aa).offer.is_sell?((0,t.wg)(),(0,t.iD)("span",z,(0,n.zw)((0,s.SU)(Aa).opponent.wallet===(0,s.SU)(ja).wallet?"покупка":"продажа"),1)):((0,t.wg)(),(0,t.iD)("span",D,(0,n.zw)((0,s.SU)(Aa).opponent.wallet===(0,s.SU)(ja).wallet?"продажа":"покупка"),1)),(0,t._)("span",q," "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1),W,(0,t._)("span",C,(0,n.zw)((0,s.SU)(Aa).offer.course)+" руб",1),$,(0,t._)("span",H,(0,n.zw)((0,s.SU)(Aa).fiat_amount)+" руб",1),Q,V,Z,(0,t._)("span",j,(0,n.zw)((0,s.SU)(Aa).payment_type.label),1),A,(0,t._)("span",F,(0,n.zw)((0,s.SU)(Aa).payment_type.payment_info),1),I,T,(0,t._)("span",null,(0,n.zw)((0,s.SU)(Fa)?"Покупатель":"Продавец"),1),K,(0,s.SU)(Aa).offer.user.wallet!==(0,s.SU)(ja).wallet?((0,t.wg)(),(0,t.iD)("span",P,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).offer.user.fio),9,J),N,(0,t.Uk)(" Завершенных сделок "+(0,n.zw)((0,s.SU)(Aa).offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",L,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).opponent.fio),9,M),O,(0,t.Uk)(" Завершенных сделок "+(0,n.zw)((0,s.SU)(Aa).opponent.total_trades),1)]))]),(0,t.Wm)(u,{spaced:"lg"}),(0,s.SU)(Aa).status.is_default?((0,t.wg)(),(0,t.iD)("div",B,[(0,s.SU)(Aa).offer.user.wallet===(0,s.SU)(ja).wallet?((0,t.wg)(),(0,t.iD)("div",E,[(0,t.Wm)(o,{loading:$a.value,label:"Согласен на сделку",rounded:"",color:"positive",class:"full-width q-py-md",onClick:a[2]||(a[2]=e=>Ia("trade_accept")),unelevated:"","no-caps":""},null,8,["loading"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,s.SU)(Aa).status.is_active?((0,t.wg)(),(0,t.iD)("div",G,[(0,s.SU)(Fa)?((0,t.wg)(),(0,t.iD)("div",R,[(0,t._)("p",null,[X,(0,t._)("span",Y,(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1),ee]),(0,t.Wm)(o,{loading:$a.value,label:`Задепонировать ${(0,s.SU)(Aa).asset_amount} ${(0,s.SU)(Aa).offer.asset.name}`,rounded:"",color:"positive",class:"full-width q-py-md",onClick:La,unelevated:"","no-caps":""},null,8,["loading","label"])])):((0,t.wg)(),(0,t.iD)("div",ae,[(0,t._)("p",null,"Ожидание депонирования {trade.asset_amount}} "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)]))])):(0,t.kq)("",!0),(0,s.SU)(Aa).status.is_money_freeze?((0,t.wg)(),(0,t.iD)("div",le,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,s.SU)(Aa).tx}&lang=en`,target:"_blank"},[(0,t._)("span",se,"Транзакция депонирования "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)],8,te)]),(0,s.SU)(Fa)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",ne,[oe,(0,t.Wm)(p,{dense:"",outlined:"",rounded:"",label:"Подверждение оплаты",modelValue:qa.value,"onUpdate:modelValue":a[3]||(a[3]=e=>qa.value=e),class:"q-mb-md"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(d,{name:"attach_file"})])),_:1},8,["modelValue"]),(0,t.Wm)(o,{loading:$a.value,disable:!qa.value,label:"Оплату произвел",rounded:"",color:"positive",class:"full-width q-py-md",onClick:a[4]||(a[4]=e=>Ia("money_send")),unelevated:"","no-caps":""},null,8,["loading","disable"])]))])):(0,t.kq)("",!0),(0,s.SU)(Aa).status.is_money_sent?((0,t.wg)(),(0,t.iD)("div",re,[(0,s.SU)(Fa)?((0,t.wg)(),(0,t.iD)("div",ie,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:(0,s.SU)(Aa).send_img,target:"_blank"},"Подтверждение оплаты",8,ue)]),(0,t.Wm)(o,{loading:$a.value,label:"Оплату получил",rounded:"",color:"positive",class:"full-width q-py-md",onClick:a[5]||(a[5]=e=>Ia("money_receive")),unelevated:"","no-caps":""},null,8,["loading"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,s.SU)(Aa).status.is_money_recieve?((0,t.wg)(),(0,t.iD)("div",de,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,s.SU)(Aa).tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",ce,"Транзакция перевода "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)],8,pe)])])):(0,t.kq)("",!0)]))])),(0,s.SU)(ja).is_p2p_admin?((0,t.wg)(),(0,t.iD)("div",Pe,[(0,t._)("p",null,[(0,t.Uk)(" Cделка № "+(0,n.zw)((0,s.SU)(Aa).id),1),Je,(0,t.Uk)(" Оффер № "+(0,n.zw)((0,s.SU)(Aa).offer.id),1),Ne,(0,t.Uk)(" Сумма сделки в рублях: "+(0,n.zw)((0,s.SU)(Aa).fiat_amount),1),Le,(0,t.Uk)(" Сумма сделки в активе: "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1),Me,Oe,(0,t.Uk)(" Тип оффера: "+(0,n.zw)((0,s.SU)(Aa).offer.is_sell?"продажа":"покупка"),1),Be,Ee,Ge,(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).offer.user.wallet),9,Re),Xe,Ye,ea,aa,(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,s.SU)(Aa).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,n.zw)((0,s.SU)(Aa).opponent.wallet),9,la),ta]),(0,s.SU)(Aa).tx?((0,t.wg)(),(0,t.iD)("p",sa,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,s.SU)(Aa).tx}&lang=en`,target:"_blank"},[(0,t._)("span",oa,"Транзакция депонирования "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)],8,na)])):(0,t.kq)("",!0),(0,s.SU)(Aa).tx_send?((0,t.wg)(),(0,t.iD)("p",ra,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,s.SU)(Aa).tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",ua,"Транзакция перевода "+(0,n.zw)((0,s.SU)(Aa).asset_amount)+" "+(0,n.zw)((0,s.SU)(Aa).offer.asset.name),1)],8,ia)])):(0,t.kq)("",!0),(0,s.SU)(Aa).send_img?((0,t.wg)(),(0,t.iD)("p",da,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:(0,s.SU)(Aa).send_img,target:"_blank"},"Подтверждение оплаты",8,pa)])):(0,t.kq)("",!0),(0,t.Wm)(o,{loading:$a.value,label:"Отмена сделки с возвратом замороженного баланса",rounded:"",color:"positive",class:"full-width q-py-md",onClick:a[6]||(a[6]=e=>Ia("admin_stop")),unelevated:"","no-caps":""},null,8,["loading"])])):(0,t.kq)("",!0)])),(0,t.Wm)(ya,{modelValue:Ha.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Ha.value=e),seamless:"",position:"bottom",onShow:Ja},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"full-width"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"q-pt-xl"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(o,{class:"absolute-top-right z-max",flat:"",round:"",icon:"close"},null,512),[[Sa]]),(0,t._)("div",wa,[(0,t.Wm)(xa,{ref_key:"messages_wrapper",ref:Ca,style:{height:"300px"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Qa.value,(e=>((0,t.wg)(),(0,t.j4)(c,{key:e.id,stamp:new Date(e.createdAt).toLocaleString(),name:e.user.fio,text:[e.message],sent:e.user.wallet===(0,s.SU)(ja).wallet,"bg-color":e.user.is_p2p_admin?"red-7":e.user.wallet===(0,s.SU)(ja).wallet?"green-3":"grey-3","text-color":e.user.is_p2p_admin?"white":""},{name:(0,t.w5)((()=>[(0,t._)("span",{class:(0,n.C_)(e.user.is_p2p_admin?"text-red-7":"")},(0,n.zw)(e.user.fio),3),fa,e.file?((0,t.wg)(),(0,t.iD)("span",ga,[(0,t._)("a",{class:"file_link",target:"_blank",href:e.file},"Прикрепленный файл",8,Ua)])):(0,t.kq)("",!0)])),_:2},1032,["stamp","name","text","sent","bg-color","text-color"])))),128))])),_:1},512),(0,t._)("div",ba,[(0,t.Wm)(d,{size:"24px",class:"cursor-pointer q-mr-lg",color:Wa.value?"positive":"grey-6",name:"attach_file"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{style:{position:"absolute",width:"42px",opacity:"0"},modelValue:Wa.value,"onUpdate:modelValue":a[7]||(a[7]=e=>Wa.value=e)},null,8,["modelValue"])])),_:1},8,["color"]),(0,t.Wm)(va,{outlined:"",rounded:"",class:"col-grow",loading:$a.value,disable:$a.value,onKeydown:Ka,modelValue:Da.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Da.value=e),label:"Ваше сообщение"},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{round:"",dense:"",disable:!Da.value,loading:$a.value,onClick:a[8]||(a[8]=e=>Na()),flat:"",icon:"send"},null,8,["disable","loading"])])),_:1},8,["loading","disable","modelValue"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(o,{class:"absolute-bottom-right",flat:"",size:"24px",round:"",icon:"las la-comments",onClick:a[11]||(a[11]=e=>Ha.value=!0)},{default:(0,t.w5)((()=>[Qa.value.length>0?((0,t.wg)(),(0,t.j4)(d,{key:0,class:"absolute-top-right",size:"16px",color:"red",name:"priority_high"})):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1})}}};var va=l(24455),ya=l(44458),ha=l(63190),ka=l(50926),Sa=l(33837),za=l(22857),Da=l(32074),qa=l(66663),Wa=l(396),Ca=l(13119),$a=l(62146),Ha=l(69984),Qa=l.n(Ha);const Va=xa,Za=Va;Qa()(xa,"components",{QBtn:va.Z,QCard:ya.Z,QCardSection:ha.Z,QSeparator:ka.Z,QFile:Sa.Z,QIcon:za.Z,QDialog:Da.Z,QScrollArea:qa.Z,QChatMessage:Wa.Z,QInput:Ca.Z}),Qa()(xa,"directives",{ClosePopup:$a.Z})}}]);