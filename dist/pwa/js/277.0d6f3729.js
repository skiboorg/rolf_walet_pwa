(globalThis["webpackChunkrupay_wallet"]=globalThis["webpackChunkrupay_wallet"]||[]).push([[277],{75008:(e,t,l)=>{"use strict";l.d(t,{C:()=>s,d:()=>o});var a=l(13433),n=l(17779);const o=({seed:e,password:t})=>{const l={status:!0,seed:e},n=a.createCipher("aes192",t);return n.update(JSON.stringify(l),"utf8","hex")+n.final("hex")},s=({hash:e,password:t})=>{try{const l=a.createDecipher("aes192",t),n=l.update(e,"hex","utf8")+l.final("utf8"),o=JSON.parse(n);return!!o.status&&o.seed}catch(l){return n.log(l),!1}}},4277:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ne});var a=l(59835),n=l(86970),o=l(14506),s=l.n(o);const i=e=>((0,a.dD)("data-v-b0619798"),e=e(),(0,a.Cn)(),e),u=i((()=>(0,a._)("img",{src:s()},null,-1))),d={class:"text3d text-bold no-margin text-h3"},c={class:"form-wrapper"},g={key:1},r={class:"text3d text-center text-weight-bold"};function p(e,t,l,o,s,i){const p=(0,a.up)("Login"),v=(0,a.up)("q-btn"),m=(0,a.up)("Register"),_=(0,a.up)("page-body"),w=(0,a.up)("page");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"page-body main-gradient"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,n.C_)(["logo",{"logo-small":o.is_seed_good||o.hash}])},[u,(0,a._)("p",d,[(0,a._)("span",null,(0,n.zw)(o.wallet_name),1)])],2),(0,a._)("div",c,[o.loginActive?((0,a.wg)(),(0,a.j4)(p,{key:0,onSeedGood:o.setSeed},null,8,["onSeedGood"])):(0,a.kq)("",!0),o.is_seed_good||!o.loginActive||o.hash?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",g,[(0,a._)("p",r,(0,n.zw)(e.$t("or_btn")),1),(0,a.Wm)(v,{label:e.$t("create_btn"),unelevated:"","no-caps":"",class:"bg-gold full-width q-py-md",onClick:t[0]||(t[0]=e=>o.loginActive=!1)},null,8,["label"])])),o.loginActive?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:2,onOpenLogin:o.openLogin},null,8,["onOpenLogin"]))])])),_:1})])),_:1})}l(46727);var v=l(60499),m=l(87270),_=l(75008),w=l(9991),b=l(18910),h=l(96928),y=l(43463),x=l(44974),f=l(17779);const k={class:"text3d text-h5 text-bold text-center text-primary q-mb-lg"},q={key:0},S={key:0,class:"flex column justify-between"},H={class:""},$={key:1,class:"pincode-tab"},C={__name:"Login",emits:["seedGood"],setup(e,{emit:t}){const l=(0,w.QT)(),o=(0,b.tv)(),s=[{label:"Русский",value:"ru-RU"},{label:"English",value:"en-US"},{label:"French",value:"fr-FR"},{label:"हिन्दी Hindī",value:"hi-IN"}],i=(0,v.iH)(null),u=(0,h.t)(),d=(0,y.s)(),c=(0,x.T)(),g=(0,v.iH)(""),r=(0,v.iH)(""),p=((0,v.iH)(!0),localStorage.getItem("hash"));async function C(e){const t=(0,_.C)({hash:p,password:e});t?(g.value=t,await D()):(0,m.d$)("negative",l.t("wrong_pin"))}async function D(){d.toggleLoadingState();const e=(0,_.d)({seed:g.value,password:r.value});await u.login(g.value,e);const t=localStorage.getItem("addresses");await c.connectWS(JSON.parse(t)[0].address),d.toggleLoadingState(),await o.push({name:"wallet_index"})}async function L(e){r.value=e,await D()}async function z(){await u.logout()}function I(e){const l=/^[A-Za-z0-9]+$/;return!!l.test(e)&&(t("seedGood",{val:[43,44,86,87,88].includes(e.length)}),[43,44,86,87,88].includes(e.length))}(0,a.wF)((()=>{const e=localStorage.getItem("lang");i.value=s.find((t=>t.value===e))}));const W=()=>{f.log(i.value),localStorage.setItem("lang",i.value.value),o.go("/")};return(e,t)=>{const l=(0,a.up)("q-select"),o=(0,a.up)("q-input"),u=(0,a.up)("pin-code"),d=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("p",k,(0,n.zw)(e.$t("login_title")),1),(0,v.SU)(p)?((0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(u,{showDigits:!1,onPincode_ready:C}),(0,a.Wm)(d,{"no-caps":"",outline:"",flat:"",class:"full-width q-mt-md",onClick:z,size:"14px",dense:"",color:"negative",label:e.$t("lost_pin")},null,8,["label"])])):((0,a.wg)(),(0,a.iD)("div",q,[(0,a.Wm)(l,{modelValue:i.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.value=e),W],options:s,filled:"",behavior:"menu",label:"Выберите язык/Choose language",class:"bg-gold q-mb-lg"},null,8,["modelValue"]),(0,a.Wm)(o,{autofocus:"",filled:"",modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),color:"primary",label:e.$t("enter_seed"),class:"input-bg-gold",rules:[t=>t&&t.length>0||e.$t("req_field"),t=>I(t)||e.$t("wrong_seed")]},null,8,["modelValue","label","rules"]),I(g.value)?((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",H,[(0,a.Wm)(u,{showDigits:!0,onPincode_ready:L})])])):(0,a.kq)("",!0)]))],64)}}};var D=l(57786),L=l(13119),z=l(24455),I=l(69984),W=l.n(I);const Q=C,U=Q;W()(C,"components",{QSelect:D.Z,QInput:L.Z,QBtn:z.Z});var V=l(99407);const Z={class:"text3d text-h5 text-bold text-center text-primary"},T={key:0,class:""},A={class:"text-weight-bold text-center text-negative"},O=["innerHTML"],j={class:"text-center"},F={class:"text-golder text-bold",target:"_blank",href:"https://wallet.rupay.pro/rupay_user_agreement.pdf"},R={key:1,class:""},N={class:"text-center q-mt-md"},P={key:2,class:""},G={class:"text-gold"},J={style:{"word-break":"break-all"},class:"text-caption bg-grey-3 q-pa-md"},Y={class:"bg-grey-7 text-gold q-pa-md text-weight-medium"},B={__name:"Register",emits:["openLogin"],setup(e,{emit:t}){const l=(0,w.QT)(),o=(0,h.t)(),s=(0,b.tv)(),i=(0,x.T)(),u=(0,v.iH)(1),d=(0,v.iH)(""),c=((0,v.iH)(!0),(0,v.iH)(!1)),g=(0,v.iH)(!1);let r=(0,v.iH)(null);const p=(0,v.iH)([{agree:!1,text:l.t("reg_agree1")},{agree:!1,text:l.t("reg_agree2")},{agree:!1,text:l.t("reg_agree3")}]),y=(0,a.Fl)((()=>p.value[0].agree&&p.value[1].agree&&p.value[2].agree));function f(){t("openLogin")}async function k(e){d.value=e,await q()}async function q(){c.value=!c.value,r.value=await V.EraChain.Crypt.generateSeed(),c.value=!c.value,u.value=3}async function S(){c.value=!c.value;const e=(0,_.d)({seed:r.value,password:d.value});await o.login(r.value,e);const t=localStorage.getItem("addresses");await i.connectWS(JSON.parse(t)[0].address),await s.push({name:"wallet_index"}),c.value=!c.value}async function H(){await(0,m.QO)(r.value,"positive",l.t("seed_copy_done")),g.value=!0}return(e,t)=>{const l=(0,a.up)("q-toggle"),o=(0,a.up)("q-btn"),s=(0,a.up)("pin-code");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("p",Z,(0,n.zw)(e.$t("reg_title")),1),1===u.value?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("p",A,(0,n.zw)(e.$t("reg_agree")),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.value,((e,t)=>((0,a.wg)(),(0,a.j4)(l,{modelValue:p.value[t].agree,"onUpdate:modelValue":e=>p.value[t].agree=e,"checked-icon":"check",color:"green","unchecked-icon":"clear",class:"text-caption q-mb-md",style:{"line-height":"110%"}},{default:(0,a.w5)((()=>[(0,a._)("p",{class:"no-margin text-gold",innerHTML:e.text},null,8,O)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),256)),(0,a._)("p",j,[(0,a._)("a",F,(0,n.zw)(e.$t("user_agreement")),1)]),(0,v.SU)(y)?((0,a.wg)(),(0,a.j4)(o,{key:0,unelevated:"","no-caps":"",label:e.$t("seed_copy_next"),class:"bg-gold q-py-md full-width",onClick:t[0]||(t[0]=e=>u.value=2),type:"submit",outline:!1},null,8,["label"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),2===u.value?((0,a.wg)(),(0,a.iD)("div",R,[(0,a.Wm)(s,{showDigits:!0,onPincode_ready:k}),(0,a._)("div",N,[(0,a._)("p",{class:"text-caption no-margin",onClick:f},(0,n.zw)(e.$t("have_seed")),1)])])):(0,a.kq)("",!0),3===u.value?((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("p",G,(0,n.zw)(e.$t("your_seed")),1),(0,a._)("p",J,(0,n.zw)((0,v.SU)(r)),1),(0,a.Wm)(o,{onClick:H,"no-caps":"",label:e.$t("seed_copy_btn"),unelevated:"",class:"bg-gold q-py-md full-width q-mb-md"},null,8,["label"]),(0,a._)("p",Y,(0,n.zw)(e.$t("seed_copy")),1),(0,a.Wm)(o,{unelevated:"","no-caps":"",label:g.value?e.$t("seed_copy_next"):e.$t("seed_copy_need_copy"),disabled:!g.value,is_loading:c.value,onClick:S,class:"bg-gold q-py-md full-width",type:"submit",outline:!1},null,8,["label","disabled","is_loading"])])):(0,a.kq)("",!0)],64)}}};var E=l(23175);const M=B,K=M;W()(B,"components",{QToggle:E.Z,QBtn:z.Z});const X={name:"IndexPage",components:{Register:K,Login:U},preFetch({redirect:e,router:t}){localStorage.getItem("seed")},setup(){const e=(0,v.iH)(!0),t=(0,v.iH)(!1),l=localStorage.getItem("hash"),a="RUPAY";function n(e){t.value=e.val}function o(l){t.value=!1,e.value=!0}return{loginActive:e,is_seed_good:t,hash:l,wallet_name:a,setSeed:n,openLogin:o}}};var ee=l(11639),te=l(70335),le=l(18149);const ae=(0,ee.Z)(X,[["render",p],["__scopeId","data-v-b0619798"]]),ne=ae;W()(X,"components",{QBtn:z.Z,QImg:te.Z,QField:le.Z})},14506:(e,t,l)=>{e.exports=l.p+"img/logo.a6b08794.webp"}}]);